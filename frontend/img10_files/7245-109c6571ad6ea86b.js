"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7245],{28036:function(e,t,r){r.d(t,{$D:function(){return l},An:function(){return o},Iy:function(){return a},ME:function(){return i},Og:function(){return n},eo:function(){return s}});class n extends Error{constructor(e,t={}){super(e),this.opts=t}}n.prototype.name="DesignPartnerError";class o extends n{constructor(e,t={}){super(e,t)}}o.prototype.name="CouldNotApplySuggestionError";class l extends n{constructor(e,t={}){super(e,t)}}l.prototype.name="InvalidResponseError";class i extends n{constructor(e,t={}){super(e,t)}}i.prototype.name="NoopSuggestionError";class a extends n{constructor(e,t={}){super("InputTooLongError: ".concat(e),t)}}a.prototype.name="InputTooLongError";class s extends n{constructor(e,t={}){super("ParsedSuggestionError: ".concat(e),t)}}i.prototype.name="ParsedSuggestionError"},76417:function(e,t,r){r.d(t,{_j:function(){return d},oO:function(){return c},uc:function(){return a}});var n=r(28036),o=r(69971),l=r(91076);let i=e=>!a(e).some(e=>["BAD_USER_INPUT"].includes(e)),a=e=>{let t=(null==e?void 0:e.graphQLErrors)||[];return null==t?void 0:t.map(e=>e.code)},s=async e=>{let{fn:t,retries:r,backoff:n=1e3,timeout:o}=e;try{return await Promise.race([t(),new Promise((e,t)=>{setTimeout(()=>t(Error("Request timeout (".concat(o,"ms)"))),o)})])}catch(c){var l;let e=null===(l=c.message)||void 0===l?void 0:l.startsWith("Request timeout");e&&console.debug("[AI] Request timeout. Not retrying");let a=i(c)&&!e;if(r>0&&a)return await new Promise(e=>setTimeout(e,n)),s({fn:t,retries:r-1,backoff:2*n,timeout:o});throw c}},c=async e=>{var t;let r=await u({messages:e.messages,maxTokens:null!==(t=e.params.maxTokens)&&void 0!==t?t:null,models:["gpt-3.5-turbo","gpt-3.5-turbo-16k"]});return{...e,params:{...e.params,model:r}}},u=async e=>{var t;let{messages:r,maxTokens:l,models:i}=e,{data:a}=await (0,o.WQq)().query({query:o.yL,returnPartialData:!1,variables:{input:{messages:r,maxTokens:l,models:i}}}),s=null==a?void 0:a.canRunChatCompletion;if(!s||0===s.length)throw Error("No response received");let c=null===(t=s.find(e=>!!e.canRun))||void 0===t?void 0:t.model;if(!c)throw new n.Iy("Input too long for models: "+JSON.stringify(i));return c},d=async function(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeout:6e4,retries:0};return console.debug("[AI][fetchChatCompletion]",e.messages,e.params),s({fn:()=>(0,o.WQq)().mutate({mutation:o.Dan,variables:{input:{...e,workspaceId:(0,l.n_)()}}}).then(e=>{let{data:t}=e,r=null==t?void 0:t.chatCompletion;if(!r||0===r.length)throw Error("No response received");return console.debug("[AI] Got chat completion",r),t}),timeout:null!==(t=n.timeout)&&void 0!==t?t:6e4,retries:null!==(r=n.retries)&&void 0!==r?r:0})}},16749:function(e,t,r){r.d(t,{V:function(){return l}});var n=r(69971),o=r(31691);class l extends o.j{getSystemChatMessage(e){return{role:n.XaP.System,operation:this.systemPromptOperation,variables:e}}getUserChatMessage(e){return{role:n.XaP.User,operation:this.userPromptOperation,variables:e}}constructor({variables:e,systemPromptOperation:t,userPromptOperation:r,params:n}){super({params:n}),this.variables=e,this.systemPromptOperation=t,this.userPromptOperation=r}}},31691:function(e,t,r){r.d(t,{j:function(){return o}});let n={model:"gpt-3.5-turbo-1106",provider:r(69971).nyn.Azure};class o{prepare(e){let{variables:t,history:r=[],params:n}=e;return{messages:[this.getSystemChatMessage(t),...r,this.getUserChatMessage(t)],params:{...this.params,...n}}}constructor({params:e}){this.params={...n,...e}}}},18755:function(e,t,r){r.d(t,{I:function(){return l}});var n=r(13364),o=r(76417);let l=async function(e,t){var r,l;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.VH.get("aiRequestRetries").chat;i.retries=null!==(l=i.retries)&&void 0!==l?l:a;let s=await (0,o._j)({...e,interactionId:t},i);return null==s?void 0:null===(r=s.chatCompletion)||void 0===r?void 0:r[0].content}},90025:function(e,t,r){r.d(t,{c:function(){return i}});var n=r(37243),o=r(30764),l=r(82631);let i=(e,t)=>{let r=a(e),n=o.HY.from(t),i=r.serializeFragment(n),s=(0,l.S)(i),c=document.createElement("div");return c.appendChild(s),c.innerHTML},a=e=>{let{schema:t,extensionManager:r}=e;if(t.cached.aiDomSerializer)return t.cached.aiDomSerializer;let l=o.PW.marksFromSchema(t),i=o.PW.nodesFromSchema(t),a=e.extensionManager.attributes;r.extensions.forEach(e=>{if(!e.config.renderHTMLforAI)return;let t=a.filter(t=>t.type===e.name);i[e.name]&&(i[e.name]=r=>{let o=(0,n.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({node:r,HTMLAttributes:o})}),l[e.name]&&(l[e.name]=(r,o)=>{let l=(0,n.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({mark:r,inline:o,HTMLAttributes:l})})});let s=new o.PW(i,l);return t.cached.aiDomSerializer=s,s}},47406:function(e,t,r){r.d(t,{X:function(){return m}});var n=r(95993),o=r(65701);async function l(e,t){let r;let n=e.getReader();for(;!(r=await n.read()).done;)t(r.value)}function i(){return{data:"",event:"",id:"",retry:void 0}}let a="text/event-stream",s="last-event-id";function c(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(a)))throw Error("Expected content-type to be ".concat(a,", Actual: ").concat(t))}class u extends n.GJ{constructor(){super({transform:async(e,t)=>{if("error"===e.event){t.error(new o.T1("StreamError message received: ".concat(JSON.stringify(e)),e.data));return}t.enqueue(e)}})}}class d extends Error{constructor(e){super(),this.timeout=e}}function m(e,t,r){var m;let h=r.retries||0,p=r.backoff||1e3,f=r.timeout||null,g=null!==(m=r.streamResumingEnabled)&&void 0!==m&&m,v=0,x=new AbortController,y=!1,b=!1,C=!1,j=null,A=!1,S=()=>p*Math.pow(2,Math.max(v-1,0)),k={};return g&&(k["gamma-stream-resuming-enabled"]="true"),{stream:new n.Pz({async start(r){null!=f&&(j=setTimeout(()=>{A=!0,x.abort(),r.error(new o.rm("Stream timed out after ".concat(f,"ms")))},f));let{headers:n,...u}=t;(function(e,t){let{signal:r,headers:n,onopen:o,onmessage:u,onclose:d,onerror:m,openWhenHidden:h,fetch:p,...f}=t;return new Promise((t,g)=>{let v;let x={...n};function y(){v.abort(),document.hidden||k()}x.accept||(x.accept=a),h||document.addEventListener("visibilitychange",y);let b=1e3,C=0;function j(){document.removeEventListener("visibilitychange",y),window.clearTimeout(C),v.abort()}null==r||r.addEventListener("abort",()=>{j(),t()});let A=null!=p?p:window.fetch,S=null!=o?o:c;async function k(){var r,n;v=new AbortController;try{let n,o,a,c;let m=await A(e,{...f,headers:x,signal:v.signal});await S(m),await l(m.body,(r=function(e,t,r){let n=i(),o=new TextDecoder,l=!1;return function(a,s){if(0===a.length)null==r||r(n),n=i(),l=!1;else if(s>0){let r=o.decode(a.subarray(0,s)),i=s+(32===a[s+1]?2:1),c=o.decode(a.subarray(i));switch(r){case"data":l?n.data=n.data+"\n"+c:(n.data=c,l=!0);break;case"event":n.event=c;break;case"id":e(n.id=c);break;case"retry":let u=parseInt(c,10);isNaN(u)||t(n.retry=u)}}}}(e=>{e?x[s]=e:delete x[s]},e=>{b=e},u),c=!1,function(e){void 0===n?(n=e,o=0,a=-1):n=function(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(n,e);let t=n.length,l=0;for(;o<t;){c&&(10===n[o]&&(l=++o),c=!1);let e=-1;for(;o<t&&-1===e;++o)switch(n[o]){case 58:-1===a&&(a=o-l);break;case 13:c=!0;case 10:e=o}if(-1===e)break;r(n.subarray(l,e),a),l=o,a=-1}l===t?n=void 0:0!==l&&(n=n.subarray(l),o-=l)})),null==d||d(),j(),t()}catch(e){if(!v.signal.aborted)try{let t=null!==(n=null==m?void 0:m(e))&&void 0!==n?n:b;window.clearTimeout(C),C=window.setTimeout(k,t)}catch(e){j(),g(e)}}}k()})})(e,{openWhenHidden:!0,credentials:"include",...u,headers:{...n,...k},signal:x.signal,onopen:async e=>{if(!e.ok||e.headers.get("content-type")!==a){if(e.status>=400&&e.status<500&&429!==e.status)x.abort(),r.error(new o.VG("Unable to complete request"));else if(v++<h&&!y)throw new d(S());else x.abort(),r.error(new o.VG("Unable to complete request"))}},onmessage(e){if(C){b||(b=!0,console.log("[AIStream] enqueue cancel event",{...e,event:"cancel",data:""}),r.enqueue({...e,event:"cancel",data:""}),r.close(),x.abort());return}A||(r.enqueue(e),y=!0)},onclose(){j&&(clearTimeout(j),j=null),r.close()},onerror(e){if(e instanceof d){if(C)throw console.error("Stream cancelled - not retrying"),Error("Stream cancelled");return e.timeout}if(e instanceof Error){if(console.error("Uncaught stream error",e),!g)throw e;if(v++<h)return S();throw e}if(y){let e="Stream closed unexpectedly";throw console.error("Uncaught stream error",e),new o.Vh(e)}}}).catch(e=>{j&&(clearTimeout(j),j=null),C||r.error(e)})}}).pipeThrough(new u),cancel:()=>{C||(C=!0)}}}},65701:function(e,t,r){r.d(t,{T1:function(){return n},VG:function(){return l},Vh:function(){return i},rm:function(){return o}});class n extends Error{constructor(e,t){super(e),this.name="StreamError",this.code="stream_error",t&&(this.code=t)}}class o extends n{constructor(e){super(e),this.name="StreamTimeoutError",this.code="timeout"}}class l extends n{constructor(e){super(e),this.name="StreamOnOpenError",this.code="on_open"}}class i extends n{constructor(e){super(e),this.name="StreamUnexpectedCloseError",this.code="unexpected_close"}}},69964:function(e,t,r){r.d(t,{P3:function(){return m},Kk:function(){return d},jz:function(){return u}});var n=r(2784),o=r(62216),l=r(11310),i=r(41019),a=r(95993);class s extends a.GJ{getContent(){return this.content}constructor(e){super({start:()=>{var t;null===(t=e.onStart)||void 0===t||t.call(e)},transform:async(t,r)=>{var n,o,l;"content"===t.event&&(this.content+=t.data,null===(n=e.onContent)||void 0===n||n.call(e,this.content)),"done"===t.event&&(null===(o=e.onComplete)||void 0===o||o.call(e,this.content)),"cancel"===t.event&&(null===(l=e.onCancel)||void 0===l||l.call(e)),r.enqueue(t)},flush(){var t;null===(t=e.onFlush)||void 0===t||t.call(e)}}),this.content=""}}var c=r(97134);let u=(e,t)=>({generate:(0,n.useCallback)(r=>d({...r,promptKey:e,opts:t}),[t,e])}),d=e=>{let{promptKey:t,opts:r,variables:n,interactionId:a,workspaceId:c}=e;a=a||(0,i.nZ)();let{cancel:u,stream:d}=(0,o.ZE)({promptKey:t,variables:n,interactionId:a,workspaceId:c},{timeout:r.timeout}),m=new s(r),h=d.pipeThrough(m);return{cancel:u,promise:new Promise((e,t)=>{(0,l.GO)(h,{onError(e){var n;null===(n=r.onError)||void 0===n||n.call(r,e),t(e)},onDone(){e(m.getContent())}})})}},m=e=>{let{promptKey:t,variables:r,interactionId:n,workspaceId:l=(0,c.n_)(),opts:a={}}=e;return n=n||(0,i.nZ)(),(0,o.Ur)({promptKey:t,interactionId:n,workspaceId:l,variables:r},a)}},62216:function(e,t,r){r.d(t,{Ur:function(){return a},ZE:function(){return i},pM:function(){return c},z4:function(){return s}});var n=r(95405),o=r(65701),l=r(47406);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.v.API_HOST+"/ai/v2/generation",o={"Content-Type":"application/json"};t.streamId&&(o["gamma-chat-completion-stream-id"]=t.streamId);let i={method:"POST",headers:o,body:JSON.stringify(e)};return(0,l.X)(r,i,t)}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.v.API_HOST+"/ai/v2/render-generation",o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return(await d(r,o,t)).result}let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.v.API_HOST+"/ai/chatCompletion",o={"Content-Type":"application/json"};t.streamId&&(o["gamma-chat-completion-stream-id"]=t.streamId);let i={method:"POST",headers:o,body:JSON.stringify(e)};return(0,l.X)(r,i,t)},c=e=>{let{streamId:t,lastEventId:r,interactionId:o,...i}=e,a=new URL(n.v.API_HOST+"/ai/resumeChatCompletion");return a.searchParams.set("interactionId",o),(0,l.X)(a.toString(),{method:"GET",headers:{"gamma-chat-completion-stream-id":t,"last-event-id":r}},{streamResumingEnabled:!0,...i})},u=e=>new Promise(t=>setTimeout(t,e)),d=async(e,t,r)=>{let{timeout:n=null,maxRetries:l=3,retryAttempts:i=0}=r,a=new AbortController,s=null;null!=n&&(s=setTimeout(()=>{throw a.abort(),Error("Request timed out after ".concat(n,"ms"))},n));let c=()=>{s&&clearTimeout(s)},m=await fetch(e,{credentials:"include",...t,signal:a.signal});if(m.ok){let e=await m.json();return c(),e}if(c(),m.status>=400&&m.status<500&&429!==m.status)throw new o.VG("Unable to complete request");if(i++<l){let r=1e3*Math.pow(2,Math.max(i-1,0));return await u(r),d(e,t,{timeout:n,retryAttempts:i,maxRetries:l})}throw Error("Unable to complete request, status="+m.status)}},11310:function(e,t,r){r.d(t,{GO:function(){return l},fZ:function(){return a},uS:function(){return i}});var n=r(37164),o=r(65701);let l=(e,t)=>{let r=e.getReader(),n=async()=>{var e,o,l;try{let{done:l,value:i}=await r.read();if(l)null===(o=t.onDone)||void 0===o||o.call(t);else{null===(e=t.onMessage)||void 0===e||e.call(t,i),n();return}}catch(e){null===(l=t.onError)||void 0===l||l.call(t,e instanceof Error?e:Error(e))}};n()},i=e=>e instanceof o.T1?{errorCode:e.code,errorMessage:e.message}:e instanceof Error?{errorMessage:e.message}:{errorMessage:e},a=(0,n.kP)("0123456789abcdefghijklmnopqrstuvwxyz",16)},41019:function(e,t,r){r.d(t,{Io:function(){return C},Lt:function(){return b},Wf:function(){return f},XH:function(){return v},bj:function(){return A},e9:function(){return x},fM:function(){return g},gb:function(){return c},gf:function(){return y},hq:function(){return s},mV:function(){return u},nZ:function(){return a.n},o:function(){return m},pQ:function(){return p},qZ:function(){return d},vL:function(){return h},ym:function(){return j}});var n=r(95405),o=r(2529),l=r(31601),i=r(97134),a=r(54728);let s=e=>{l.co.track(l.AA.AI_REQUEST_SENT,{...e,gitSHA:n.v.GIT_SHA})},c=e=>{l.co.track(l.AA.AI_REQUEST_COMPLETE,{...e,gitSHA:n.v.GIT_SHA})},u=e=>{l.co.track(l.AA.AI_REQUEST_ABORT,{...e,gitSHA:n.v.GIT_SHA})},d=e=>{l.co.track(l.AA.AI_REQUEST_STREAM_START,{...e,gitSHA:n.v.GIT_SHA})},m=e=>{l.co.track(l.AA.AI_REQUEST_RESPONSE,{...e,gitSHA:n.v.GIT_SHA})},h=e=>{l.co.track(l.AA.AI_SUGGESTION_APPLY,{...e,gitSHA:n.v.GIT_SHA})},p=e=>{l.co.track(l.AA.AI_REQUEST_ERROR,{...e,gitSHA:n.v.GIT_SHA})},f=e=>{l.co.track(l.AA.AI_REQUEST_RETRY,{...e,gitSHA:n.v.GIT_SHA})},g=e=>{l.co.track(l.AA.AI_DOC_RATED,{...e,gitSHA:n.v.GIT_SHA,product:(0,o.K9)((0,i.rW)())})},v=e=>{let t=e.tags.reduce((e,t)=>(e[t]=!0,e),{});l.co.track(l.AA.AI_DOC_FEEDBACK_SUBMITTED,{...e,tags_map:t,gitSHA:n.v.GIT_SHA,product:(0,o.K9)((0,i.rW)())})},x=e=>{l.co.track(l.AA.AI_IMPORT_SLIDE_RATED,{...e,gitSHA:n.v.GIT_SHA})},y=e=>{l.co.track(l.AA.AI_IMPORT_SLIDE_FEEDBACK,{...e,gitSHA:n.v.GIT_SHA})},b=e=>{l.co.track(l.AA.AI_IMAGE_FEEDBACK_SUBMITTED,{...e,gitSHA:n.v.GIT_SHA})},C=e=>{l.co.track(l.AA.AI_IMAGE_RATED,{...e,gitSHA:n.v.GIT_SHA})},j=e=>{l.co.track(l.AA.AI_CARD_FEEDBACK,{...e,gitSHA:n.v.GIT_SHA})},A=e=>{l.co.track(l.AA.AI_CARD_RATING,{...e,gitSHA:n.v.GIT_SHA})}},26171:function(e,t,r){r.d(t,{S:function(){return l}});var n=r(16749),o=r(8940);let l=new n.V({systemPromptOperation:o.Run.GenerateImagePromptSystem,userPromptOperation:o.Run.GenerateImagePromptUser,variables:["input","html"],params:{temperature:.7,maxTokens:50}})},67548:function(e,t,r){r.d(t,{O:function(){return c}});var n=r(52322),o=r(29117),l=r(32899),i=r(28535),a=r(42946),s=r(49929);let c=e=>{let{promptPageInfo:t,nextPrompt:r,prevPrompt:c,isDisabled:u,...d}=e;return(0,n.jsxs)(o.U,{spacing:1,...d,children:[(0,n.jsx)(l.h,{variant:"ghost",icon:(0,n.jsx)(s.G,{icon:a.A35}),isDisabled:u||!t.canGoPrev,onClick:()=>c(),"aria-label":"left",color:"gray.800",size:"xs"}),(0,n.jsxs)(i.xu,{as:"span",color:"gray.800",fontSize:"sm",children:[t.curr," / ",t.total]}),(0,n.jsx)(l.h,{variant:"ghost",icon:(0,n.jsx)(s.G,{icon:a._tD}),color:"gray.800",isDisabled:u||!t.canGoNext,onClick:()=>r(),"aria-label":"left",size:"xs"})]})}},20183:function(e,t,r){r.d(t,{A:function(){return E}});var n=r(52322),o=r(55478),l=r(35183),i=r(38035),a=r(43679),s=r(34071),c=r(62614),u=r(29117),d=r(75009),m=r(28535),h=r(39429),p=r(48394),f=r(17993),g=r(74409),v=r(20437),x=r(29494),y=r(77533),b=r(42946),C=r(49929),j=r(2784),A=r(71383),S=r(78112),k=r(92763),w=r(5946);let E=(0,j.memo)(e=>{var t;let{stylePreset:r,setStylePreset:y,stylePrompt:E,setStylePrompt:P,presetOptions:H,isDisabled:I,contextualTheme:T,getStylePromptFromPreset:M,getThemeNameFromStylePrompt:R,getPresetDisplayMetadata:L,onKeyDown:G}=e,{isOpen:z,onToggle:D,onClose:U}=(0,o.q)(),N=(0,j.useMemo)(()=>k.gL.find(e=>e.stylePreset===r),[r]),[O,W]=(0,j.useState)(N),F=(0,A.CG)(S.Pu),q=T||F,B=null==q?void 0:null===(t=q.config)||void 0===t?void 0:t.stylePrompt,K=(0,j.useCallback)(e=>{P(e.target.value),r!==k.si.Custom&&(y(k.si.Custom),W(k.gL.find(e=>e.stylePreset===k.si.Custom)))},[P,y,r]),V=(0,j.useCallback)(e=>{let t=L(e);t&&(P(M(e)),y(e),W(t),U())},[L,M,U,y,P]),X=(0,j.useMemo)(()=>{if(r===k.si.Theme)return R(E)},[R,r,E]),{scrollContainerRef:Y}=(0,w.n1)(r||"",z);return(0,n.jsx)(l.NI,{children:(0,n.jsxs)(i.k,{direction:"column",gap:2,children:[(0,n.jsxs)(a.J,{placement:"bottom-start",matchWidth:!0,isOpen:z,onClose:U,closeOnBlur:!0,children:[(0,n.jsx)(s.x,{children:(0,n.jsx)(c.z,{width:"100%",type:"button",boxShadow:"none",onClick:D,rightIcon:(0,n.jsx)(C.G,{icon:b.ptq}),isDisabled:I,justifyContent:"space-between",children:(0,n.jsxs)(u.U,{spacing:2,children:[(null==O?void 0:O.icon)?(0,n.jsx)(C.G,{icon:O.icon}):(0,n.jsx)(d.E,{width:"24px",height:"24px",src:null==O?void 0:O.imageUrl,borderRadius:"md"}),(0,n.jsx)(m.xu,{flex:1,children:"".concat(null==O?void 0:O.name()).concat(X?" (".concat(X,")"):"")})]})})}),(0,n.jsx)(h.y,{width:"auto",maxHeight:"max(350px, 40vh)",overflowY:"auto",ref:Y,children:(0,n.jsx)(p.b,{children:(0,n.jsx)(f.g,{spacing:4,children:H.map(e=>(0,n.jsxs)(f.g,{alignItems:"start",width:"100%",spacing:0,children:[(0,n.jsx)(g.X,{size:"sm",mb:2,children:e.title()}),(0,n.jsx)(v.M,{columns:{base:3,"2xl":4},spacing:2,children:e.presets.filter(e=>!("Theme"===e.stylePreset&&!B)).map(e=>(0,n.jsx)(m.xu,{"data-popover-scroll-id":e.stylePreset,children:(0,n.jsx)(_,{preset:e,onClick:()=>V(e.stylePreset),isSelected:e.stylePreset===r},e.stylePreset)},e.stylePreset))})]},e.title()))})})})]}),r!==k.si.None&&(0,n.jsx)(x.g,{onKeyDown:G,isDisabled:I,height:"80px",value:E,onChange:K,resize:"none"})]})})});E.displayName="StylePresetMenu";let _=e=>{let{preset:t,onClick:r,isSelected:o}=e;return(0,n.jsxs)(f.g,{_hover:{cursor:o?"default":"pointer",borderColor:o?"trueblue.200":"gray.200",backgroundColor:o?"trueblue.50":"gray.50"},onClick:r,borderRadius:"md",spacing:1,p:2,border:"1px",width:"100%",color:o?"trueblue.500":"gray.900",bgColor:o?"trueblue.50":"transparent",borderColor:o?"trueblue.200":"transparent",children:[t.icon?(0,n.jsx)(m.xu,{width:{base:"120px","2xl":"123.5px"},height:"35px",display:"flex",justifyContent:"center",alignItems:"center",children:(0,n.jsx)(m.xu,{width:"100%",height:"100%",bgColor:"transparent",rounded:"md",display:"flex",alignItems:"center",justifyContent:"center",children:(0,n.jsx)(C.G,{icon:t.icon})})}):(0,n.jsx)(d.E,{src:t.imageUrl,width:"100%",height:"auto",borderRadius:"md"}),(0,n.jsx)(y.x,{color:o?"trueblue.500":"gray.900",fontSize:"sm",children:t.name()})]})}},92763:function(e,t,r){r.d(t,{sl:function(){return s},gL:function(){return a},me:function(){return l},si:function(){return i}});var n=r(42946),o=r(87254);let l={Default:()=>o.ag._({id:"46F406"}),Realistic:()=>o.ag._({id:"uFPBcL"}),Artistic:()=>o.ag._({id:"tqhB0N"})},i={None:"None",Anime:"Anime",Digital_Art_Concept_Art:"Digital_Art_Concept_Art",Ethereal_Fantasy_Art:"Ethereal_Fantasy_Art",Photography:"Photography",Analog_film:"Analog_film",Vaporwave:"Vaporwave",Isometric:"Isometric",Low_Poly:"Low_Poly",Claymation:"Claymation",Origami:"Origami",Line_Art:"Line_Art",Pixel_Art:"Pixel_Art",Texture:"Texture",Theme:"Theme",Custom:"Custom"},a=[{stylePreset:i.None,name:()=>o.ag._({id:"iXzipJ"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/default.jpg",icon:n.gPx,category:l.Default,stylePrompt:""},{stylePreset:i.Anime,name:()=>o.ag._({id:"RulMCV"}),imageUrl:"/_next/static/media/anime.c842eccd.jpg",category:l.Artistic,stylePrompt:"anime artwork. anime style, key visual, vibrant, studio anime, highly detailed"},{stylePreset:i.Digital_Art_Concept_Art,name:()=>o.ag._({id:"PADW9l"}),imageUrl:"/_next/static/media/digital-art.728c3ff0.jpg",category:l.Artistic,stylePrompt:"concept art. digital artwork, illustrative, painterly, matte painting, highly detailed"},{stylePreset:i.Ethereal_Fantasy_Art,name:()=>o.ag._({id:"C1chBY"}),imageUrl:"/_next/static/media/fantasy.86ede605.jpg",category:l.Artistic,stylePrompt:"ethereal fantasy concept art of. magnificent, celestial, ethereal, painterly, epic, majestic, magical, fantasy art, cover art, dreamy"},{stylePreset:i.Photography,name:()=>o.ag._({id:"j1ao1Y"}),imageUrl:"/_next/static/media/photography.bce47d9c.jpg",category:l.Realistic,stylePrompt:"cinematic photo. 35mm photograph, film, bokeh, professional, 4k, highly detailed"},{stylePreset:i.Analog_film,name:()=>o.ag._({id:"bK8OnA"}),imageUrl:"/_next/static/media/analog-film.105509c1.jpg",category:l.Realistic,stylePrompt:"analog film photo. faded film, desaturated, 35mm photo, grainy, vignette, vintage, Kodachrome, Lomography, stained, highly detailed, found footage"},{stylePreset:i.Vaporwave,name:()=>o.ag._({id:"rPpJGr"}),imageUrl:"/_next/static/media/vaporwave.f8a9afd0.jpg",category:l.Artistic,stylePrompt:"vaporwave synthwave style. cyberpunk, neon, vibes, stunningly beautiful, crisp, detailed, sleek, ultramodern, high contrast, cinematic composition"},{stylePreset:i.Isometric,name:()=>o.ag._({id:"rHgk/g"}),imageUrl:"/_next/static/media/isometric.86adffe4.jpg",category:l.Artistic,stylePrompt:"isometric style. vibrant, beautiful, crisp, detailed, ultra detailed, intricate"},{stylePreset:i.Low_Poly,name:()=>o.ag._({id:"X3ZAzR"}),imageUrl:"/_next/static/media/low-poly.e2805ce4.jpg",category:l.Artistic,stylePrompt:"low-poly style. ambient occlusion, low-poly game art, polygon mesh, jagged, blocky, wireframe edges, centered composition"},{stylePreset:i.Claymation,name:()=>o.ag._({id:"Q61KDs"}),imageUrl:"/_next/static/media/claymation.92bfacf1.jpg",category:l.Artistic,stylePrompt:"claymation style. sculpture, clay art, centered composition, play-doh"},{stylePreset:i.Origami,name:()=>o.ag._({id:"MHkaLx"}),imageUrl:"/_next/static/media/origami.2586b331.jpg",category:l.Artistic,stylePrompt:"origami style. paper art, pleated paper, folded, origami art, pleats, cut and fold, centered composition"},{stylePreset:i.Line_Art,name:()=>o.ag._({id:"i6SPYf"}),imageUrl:"/_next/static/media/line-art.bd2852c5.jpg",category:l.Artistic,stylePrompt:"line art drawing. professional, sleek, modern, minimalist, graphic, line art, vector graphics"},{stylePreset:i.Pixel_Art,name:()=>o.ag._({id:"3a27VZ"}),imageUrl:"/_next/static/media/pixel-art.ca70c7b3.jpg",category:l.Artistic,stylePrompt:"pixel-art. low-res, blocky, pixel art style, 16-bit graphics"},{stylePreset:i.Texture,name:()=>o.ag._({id:"MCId55"}),imageUrl:"/_next/static/media/texture.6214fde9.jpg",category:l.Artistic,stylePrompt:"texture. top down close-up, video game"},{stylePreset:i.Theme,name:()=>o.ag._({id:"c8dzFk"}),imageUrl:"",icon:n.q2v,category:l.Default,stylePrompt:""},{stylePreset:i.Custom,name:()=>o.ag._({id:"zkWoIW"}),imageUrl:"",icon:n.TzT,category:l.Default,stylePrompt:""}],s={square:1,landscape:4/3,portrait:3/4}},5946:function(e,t,r){r.d(t,{Nw:function(){return S},S8:function(){return A},ec:function(){return x},jg:function(){return j},n1:function(){return w},oj:function(){return k}});var n=r(27191),o=r(2784),l=r(90025),i=r(69964),a=r(34742);r(26171);var s=r(10617),c=r(71383),u=r(23186),d=r(78112),m=r(12971),h=r(31335);r(97134);var p=r(32817),f=r(6114);let g=e=>{var t,r;if(!(e instanceof n.qv))return null;if("smartLayoutCell"===e.node.type.name&&(null===(t=e.node.textContent)||void 0===t?void 0:t.length)>=5)return e.node.content;let o=e.$from;for(;o.depth>0;){let e=o.node(o.depth);if("smartLayoutCell"===e.type.name&&(null===(r=e.textContent)||void 0===r?void 0:r.length)>=5)return e.content;o=o.doc.resolve(o.before(o.depth))}return null},v=e=>(0,o.useCallback)(()=>{if(!e)return null;let{selection:t}=e.state,r=(0,m.Ru)(t.$from,h.KH)[0],n=r&&(0,u.NE)(r.node,r.pos),{content:o}=e.state.doc.slice(n.pos+1,n.pos+n.node.nodeSize-1),i=g(t);return i?(0,l.c)(e,i):(0,l.c)(e,o)},[e]),x=e=>{let{editor:t,prompt:r,stylePrompt:n,addPrompt:l}=e,a=(0,c.CG)(d.Wl),[s,u]=(0,o.useState)(!1),m=v(t),h=(0,o.useCallback)(()=>{u(!0),l("","push")},[l]),p=(0,o.useCallback)(e=>{l(e,"update")},[l]),f=(0,o.useCallback)(()=>{u(!1)},[]),g=(0,o.useCallback)(e=>{console.error("Error enhancing image",e),u(!1)},[]),{generate:x}=(0,i.jz)("EnhanceAIImage",{onStart:h,onContent:p,onComplete:f,onError:g,timeout:3e4}),y=(0,o.useCallback)(()=>{var e;if(!s&&(null==a?void 0:a.id))return x({variables:{currentPrompt:r,stylePrompt:n,cardHtml:(null==t?void 0:t.isSiteNavbarEditor)?void 0:null!==(e=m())&&void 0!==e?e:void 0},workspaceId:a.id}).promise},[s,null==a?void 0:a.id,x,r,n,null==t?void 0:t.isSiteNavbarEditor,m]);return{isEnhancing:s,setIsEnhancing:u,runEnhanceImagePrompt:y}},y=e=>e.ind===e.history.length-1,b=e=>e.history[e.history.length-1],C={load:(e,t)=>({history:[t],ind:0}),push(e,t){return""===b(e).trim()?this.replace(e,t):{history:[...e.history,t],ind:e.history.length}},replace(e,t){let r=e.history.slice(0,-1);return{history:[...r,t],ind:r.length}},select(e,t){return y(e)&&b(e)===t?e:this.push(e,t)}},j=()=>{let e=(0,o.useRef)(!1),[t,r]=(0,o.useState)({history:[""],ind:0}),n=(0,o.useCallback)((t,n)=>{"load"===n&&r(e=>C.load(e,t)),"push"===n&&r(e=>C.push(e,t)),"update"===n&&(e.current?r(e=>C.push(e,t)):r(e=>C.replace(e,t))),"select"===n&&r(e=>C.select(e,t)),e.current="update"!==n},[]),l=(0,o.useCallback)(()=>{let{ind:e}=t;e<=0||r(e=>({...e,ind:e.ind-1}))},[t]),i=(0,o.useCallback)(()=>{let{history:e,ind:n}=t;n>=e.length-1||r(e=>({...e,ind:e.ind+1}))},[t]),{ind:a,history:s}=t;return{prompt:s[a]||"",addPrompt:n,promptPageInfo:{curr:a+1,total:s.length,canGoNext:a<s.length-1,canGoPrev:a>0},nextPrompt:i,prevPrompt:l}},A=()=>{let[e,t]=(0,p.I)("aiImageRatings",{});return{saveImageRating:(0,o.useCallback)((r,n)=>{r.savedMediaId&&(e[r.savedMediaId]=n,t(e))},[]),hasRatedImage:(0,o.useCallback)(t=>!t.savedMediaId||!!e[t.savedMediaId],[])}},S=(e,t)=>{let r=(0,c.CG)(d.ke),{data:n,loading:l}=(0,f.L)({docId:r,interactionId:e,scope:r?"doc":"user"}),i=r?"workspaceSavedMedia":"userSavedMedia";return{savedMedia:(0,o.useMemo)(()=>{var e;return((null==n?void 0:null===(e=n[i])||void 0===e?void 0:e.edges)||[]).map(e=>e.node).filter(e=>{if(t){var r;return(null==e?void 0:null===(r=e.attrs)||void 0===r?void 0:r.query)===t}return!0})},[n,i,t]),isLoading:l}},k=()=>{let e=(0,c.CG)(d.yx),t=(0,s.Y)("ai_premium_models",null==e?void 0:e.organization);return(0,o.useCallback)(e=>(0,a.Hr)(e)&&(t||!(0,a.Om)(e)),[t])},w=(e,t)=>{let r=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(!t)return;let n=r.current;if(!n)return;let o=n.querySelector('[data-popover-scroll-id="'.concat(e,'"]'));if(!(o instanceof HTMLElement))return;let l=o.offsetHeight/2,i=n.offsetHeight/2,a=o.offsetTop-i+l;n.scrollTo({top:a,behavior:"instant"})},[t,e]),{scrollContainerRef:r}}},6114:function(e,t,r){r.d(t,{L:function(){return a},c:function(){return i}});var n=r(2784),o=r(69971),l=r(97134);let i=e=>{var t;let{docId:r,themeId:l,interactionId:i,scope:s="legacy"}=e,{data:c,loading:u,fetchMore:d}=a({scope:s,docId:r,themeId:l,interactionId:i}),m=(0,n.useMemo)(()=>{switch(s){case"user":return"userSavedMedia";case"doc":return"workspaceSavedMedia";default:return"savedMedia"}},[s]),h=(0,n.useMemo)(()=>{var e;return((null==c?void 0:null===(e=c[m])||void 0===e?void 0:e.edges)||[]).map(e=>e.node)},[c,m]),p=null==c?void 0:null===(t=c[m])||void 0===t?void 0:t.pageInfo,[f,g]=(0,n.useState)(!1),v=(0,n.useCallback)(async()=>{if((null==p?void 0:p.hasNextPage)&&(null==p?void 0:p.endCursor)){g(!0);try{await d({variables:{after:p.endCursor},updateQuery:(e,t)=>{var r,n;let{fetchMoreResult:o}=t;if(!o)return e;let l=(null===(r=o[m])||void 0===r?void 0:r.edges)||[],i=[...(null===(n=e[m])||void 0===n?void 0:n.edges)||[],...l];return{...e,[m]:{...o[m],edges:i}}}})}catch(e){console.error("Error loading more images:",e)}finally{g(!1)}}},[d,p,m]),[x,y]=(0,n.useState)(null),[b,C]=(0,n.useState)(!1),[j]=(0,o.BAq)(),A=(0,n.useCallback)(async e=>{y(e),C(!0);try{await j({variables:{id:e},update:t=>{t.evict({id:t.identify({id:e,__typename:"SavedMedia"})}),t.gc()},refetchQueries:["GetSavedMedia","GetUserSavedMedia","GetWorkspaceSavedMedia"]})}catch(e){console.error("Error deleting image:",e)}finally{y(null),C(!1)}},[j]);return{history:h,loadMore:v,isLoadingMore:f,canLoadMore:!!(null==p?void 0:p.hasNextPage),isLoading:u,deleteImage:A,deletingId:x,isDeleting:b}},a=e=>{var t;let{scope:r,interactionId:n,docId:i,themeId:a}=e,s=null!==(t=(0,l.n_)())&&void 0!==t?t:"",c=n?3:18,u={workspaceId:s,types:[o.DDH.Image],source:"image.ai-generated",first:c,...n?{interactionId:n}:{}},d={type:o.DDH.Image,source:"image.ai-generated",first:c},m={...i?{docId:i}:{},...a?{themeId:a}:{}},h=(0,o.p52)({variables:{...u},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",skip:"user"!==r}),p=(0,o.Unw)({variables:{...u,...m},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",skip:"doc"!==r}),f=(0,o.qOp)({variables:{...d,...m},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",skip:"legacy"!==r});return"user"===r?h:"doc"===r?p:f}},21476:function(e,t,r){r.d(t,{MI:function(){return b},yD:function(){return y},sK:function(){return x},mG:function(){return v},k8:function(){return g},Ac:function(){return f},Xc:function(){return C}});var n=r(27875),o=r.n(n),l=r(2784),i=r(30240),a=r(34742),s=r(5946),c=r(71383),u=r(45462),d=r(92566),m=r(78112),h=r(92763);let p=e=>{var t;let{contextualTheme:r}=e;(0,u.a)();let n=(0,c.CG)(d.ez),o=(0,c.CG)(m.Pu),i=r||o,a=!!(0,c.CG)(m.yx),s=(0,l.useMemo)(()=>Object.values(h.me).map(e=>({title:e,presets:h.gL.filter(t=>t.category===e&&!t.hidden&&(a||t.stylePreset!==h.si.Custom))})),[a]),p=(0,l.useCallback)(e=>Object.values(h.si).includes(e),[]),f=(0,l.useCallback)(e=>{if(!p(e))return"";if(p(e)){var t;return(null===(t=h.gL.find(t=>t.stylePreset===e))||void 0===t?void 0:t.stylePrompt)||""}return""},[p]),g=(0,l.useCallback)((e,t)=>{if(!p(e))return"";if(e===h.si.Theme){var r;return(null==i?void 0:null===(r=i.config)||void 0===r?void 0:r.stylePrompt)||""}return e===h.si.Custom?t:f(e)},[p,f,null==i?void 0:null===(t=i.config)||void 0===t?void 0:t.stylePrompt]),v=(0,l.useCallback)(e=>h.gL.find(t=>t.stylePreset===e),[]);return{stylePresetOptions:s,getStylePromptFromPreset:g,getThemeNameFromStylePrompt:(0,l.useCallback)(e=>{var t;return(null===(t=n.find(t=>t.config.stylePrompt===e))||void 0===t?void 0:t.name)||""},[n]),getPresetDisplayMetadata:v,getPredefinedStylePrompt:f}},f=100,g=8,v=200,x=void 0,y=3,b=void 0,C=e=>{var t,r,n,c,u,d,m,C,A,S,k,w;let{contextualTheme:E,lastUsedImageGenerationSettingsInDoc:_,aiParams:P}=e,H=(0,i.ye)("aiGeneratedImagesDefaultModel"),{stylePresetOptions:I,getStylePromptFromPreset:T,getThemeNameFromStylePrompt:M,getPresetDisplayMetadata:R}=p({contextualTheme:E}),{prompt:L,addPrompt:G,promptPageInfo:z,nextPrompt:D,prevPrompt:U}=(0,s.jg)(),[N,O]=(0,l.useState)(null!==(r=null!==(t=null==P?void 0:P.model)&&void 0!==t?t:null==_?void 0:_.model)&&void 0!==r?r:H),[W,F]=(0,l.useState)(null!==(c=null!==(n=null==P?void 0:P.stylePreset)&&void 0!==n?n:null==_?void 0:_.stylePreset)&&void 0!==c?c:h.si.None),[q,B]=(0,l.useState)(T(W,null==_?void 0:_.stylePrompt)),[K,V]=(0,l.useState)(null!==(u=null==P?void 0:P.negative_prompt)&&void 0!==u?u:""),[X,Y]=(0,l.useState)(null!==(d=null==P?void 0:P.count)&&void 0!==d?d:y),[J,Q]=(0,l.useState)(null!==(C=null!==(m=null==P?void 0:P.steps)&&void 0!==m?m:x)&&void 0!==C?C:0),[Z,$]=(0,l.useState)(null!==(S=null!==(A=null==P?void 0:P.cfg_scale)&&void 0!==A?A:b)&&void 0!==S?S:0),[ee,et]=(0,l.useState)(null!==(w=null!==(k=j(null==P?void 0:P.height,null==P?void 0:P.width))&&void 0!==k?k:j(null==_?void 0:_.height,null==_?void 0:_.width))&&void 0!==w?w:"square"),er=(0,a.mw)(N),en=(null==er?void 0:er.aspectRatios[ee])||a.vr,eo=(0,l.useMemo)(()=>({prompt:L,model:N,stylePreset:W,stylePrompt:q,height:en.height,width:en.width,steps:J?o()(J,1,f):void 0,count:o()(X,g),negative_prompt:K,cfg_scale:Z?o()(Z,1,v):void 0}),[L,N,W,q,en.height,en.width,K,X,J,Z]),el=(0,s.oj)();(0,l.useEffect)(()=>{el(N)||O(H)},[N,H,el]);let ei=(0,l.useCallback)((e,t)=>{if(!e)return;let{prompt:r,height:n,width:o,stylePreset:l,stylePrompt:i,model:a,negative_prompt:s,count:c,steps:u,cfg_scale:d}=e;n&&o&&et(j(n,o)),r&&G(r,t),i&&B(i),l&&F(l),a&&el(a)&&O(a),s&&V(s),c&&Y(c),u&&Q(u),d&&$(d)},[G,el]),ea=(0,l.useCallback)(e=>{var t,r,n;let{aiParams:o}=e,{height:l,width:i,model:s,stylePrompt:c,stylePreset:u,prompt:d}=null!=o?o:{};et(null!==(r=null!==(t=j(l,i))&&void 0!==t?t:j(null==_?void 0:_.height,null==_?void 0:_.width))&&void 0!==r?r:a.vr.key),O(null!==(n=null!=s?s:null==_?void 0:_.model)&&void 0!==n?n:H),B(null!=c?c:""),F(null!=u?u:h.si.None),G(null!=d?d:"","load")},[G,H,null==_?void 0:_.height,null==_?void 0:_.model,null==_?void 0:_.width]),es=(0,l.useMemo)(()=>e=>!!e&&!!e.aiParams&&(L!==e.aiParams.prompt||N!==e.aiParams.model||ee!==j(e.aiParams.height,e.aiParams.width)||W!==e.aiParams.stylePreset),[ee,N,W,L]);return{model:N,setModel:O,prompt:L,addPrompt:G,promptPageInfo:z,nextPrompt:D,prevPrompt:U,stylePrompt:q,setStylePrompt:B,stylePreset:W,setStylePreset:F,stylePresetOptions:I,getPresetDisplayMetadata:R,getThemeNameFromStylePrompt:M,getStylePromptFromPreset:T,aspectRatio:ee,setAspectRatio:et,imageGenerateConfig:eo,loadImageAiParams:ei,resetImageAiParams:ea,isPromptDirty:es,negativePrompt:K,setNegativePrompt:V,count:X,setCount:Y,steps:J,setSteps:Q,cfgScale:Z,setCfgScale:$}},j=(e,t)=>e&&t?e>t?"portrait":e<t?"landscape":"square":"square"},10617:function(e,t,r){r.d(t,{R4:function(){return n.R},uL:function(){return o.uL},dU:function(){return o.dU},Y:function(){return o.Y},_O:function(){return o._O}}),r(43163);var n=r(14421),o=r(35534);r(2784)},25111:function(e,t,r){r.d(t,{_:function(){return D}});var n=r(52322),o=r(29117),l=r(28535),i=r(43297),a=r(38035),s=r(10625),c=r(67046),u=r(62614),d=r(99058),m=r(44035),h=r(39237),p=r(75768),f=r(32899),g=r(42946),v=r(49929),x=r(64253),y=r(5879),b=r(87254),C=r(62349),j=r.n(C),A=r(2784),S=r(98621),k=r.n(S),w=r(40382),E=r(82729),_=r(27875),P=r.n(_);let H={soft:{name:"Soft",spin:[0,-40,40],lighten:[0,0,0]},duo:{name:"Duo",spin:[0,180],lighten:[0,0]},crescent:{name:"Crescent",spin:[0,-45,45,-90,90],lighten:[0,0,0,0,0]},wisp:{name:"Wisp",spin:[0,72,216],lighten:[0,0,0]},mono:{name:"Mono",spin:[0,0,0],lighten:[0,20,40]},cosmos:{name:"Cosmos",spin:[0,72,144,216,288],lighten:[0,0,0,0,0]}},I=e=>{let t=[];e.forEach((e,r)=>{let n=e.setAlpha(1),o=n.toHsl().h*r,l="radial-gradient(circle at ".concat(2*o%360/360*50,"% ").concat(3*o%360/360*50,"%, ").concat(n.setAlpha(.5).toHex8String()," 0, ").concat(n.setAlpha(0).toHex8String()," ").concat(1*o%360/360*50+50,"%)");t.push(l)});let r=e[0].setAlpha(.5).toHex8String();return t.push("linear-gradient(0deg, ".concat(r," 0%, ").concat(r," 100%)")),{backgroundImage:t.join(",")}},T=(e,t)=>{let r=H[e],n=[];return r.spin.forEach(e=>{let r=k()(t.toHsv()).spin(e);n.push(r)}),r.lighten.forEach((e,t)=>{n[t].lighten(e)}),n},M=(e,t)=>{let r=T(e,t),n=I(r);return{colors:r,gradient:n}},R=(e,t,r)=>{t.forEach(e=>{e&&(e.style.opacity="0")}),e.forEach((e,n)=>{let o=t[n];if(!o||!r)return;let l=function(e,t){let r=e.offsetWidth,n=k()(t),o=Math.PI/180*n.toHsl().h,l=-(n.toHsl().l*r)+r;return{x:r/2-l*Math.cos(o),y:r/2-l*Math.sin(o)}}(r,e);o.style.transform="translate(calc(".concat(l.x,"px - 50%),calc(").concat(l.y,"px - 50%))"),o.style.backgroundColor=e.toHexString(),o.style.opacity="1"})},L=(0,A.forwardRef)(function(e,t){let{isPrimary:r=!1,noTransition:o=!1}=e;return(0,n.jsx)(l.xu,{ref:t,borderRadius:"full",boxSize:r?7:5,pos:"absolute",zIndex:r?2:1,shadow:"base",border:"2px solid white",pointerEvents:"none",transitionProperty:o?"none":"transform",transitionDuration:"normal"})}),G=(0,A.memo)(e=>{let{updateColor:t,colors:r}=e,o=(0,A.useRef)(null),i=(0,A.useRef)(null),s=(0,A.useRef)(null),c=(0,A.useRef)(null),u=(0,A.useRef)(null),d=(0,A.useRef)(null),m=(0,A.useMemo)(()=>[i,s,c,u,d],[]);(0,A.useEffect)(()=>{R(r,m.map(e=>e.current),o.current)},[r,m]);let h=(0,A.useCallback)(e=>{if(!o.current)return;let r=o.current.getBoundingClientRect();(e.clientX||e.clientY)&&t(function(e,t,r){let n=e.current.offsetWidth,o=e.current.offsetHeight,l=n/2,i=o/2,a=function(e,t,r,n,o){let l=r-e,i=n-t;return P()(Math.sqrt(i*i+l*l),0,o)}(t,r,l,i,n/2),s=180/Math.PI*Math.atan2(i-r,l-t);return k().fromRatio({h:s+360*Math.ceil(-s/360)+1,s:1,l:Math.abs(-a/n+1)})}(o,e.clientX-r.left,e.clientY-r.top))},[t]),p=(0,A.useCallback)(()=>{document.removeEventListener("mousemove",h)},[h]),f=(0,A.useCallback)(e=>{document.addEventListener("mousemove",h),document.addEventListener("mouseup",p,{once:!0}),h(e)},[h,p]);return(0,n.jsxs)(l.xu,{onMouseDown:f,p:4,m:-4,position:"relative",children:[(0,n.jsx)(L,{ref:i,noTransition:!0,isPrimary:!0}),(0,n.jsx)(L,{ref:s}),(0,n.jsx)(L,{ref:c}),(0,n.jsx)(L,{ref:u}),(0,n.jsx)(L,{ref:d}),(0,n.jsx)(E.o,{ratio:1,children:(0,n.jsxs)(a.k,{ref:o,position:"relative",borderRadius:"full",shadow:"lg",children:[(0,n.jsx)(a.k,{pos:"absolute",borderRadius:"full",bg:"radial-gradient(circle closest-side, rgb(255, 255, 255), transparent)",inset:0,zIndex:1}),(0,n.jsx)(a.k,{pos:"absolute",inset:0,bg:"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",transform:"rotateZ(270deg)",borderRadius:"full"})]})})]})}),z={vibe:"mono",primaryColor:"#75d8ff",css:{}},D=e=>{let{value:t,updateValue:r,isDark:C}=e,{vibe:S,primaryColor:E}={...z,...t},[_,P]=(0,A.useState)(k()(E)),{colors:I,gradient:T}=(0,A.useMemo)(()=>M(S,_),[S,_]),R=(0,A.useCallback)(e=>{let{gradient:t}=M(S,e);r({vibe:S,primaryColor:e.toHexString(),css:t})},[S,r]),L=(0,w.Z_)(R,100),D=(0,A.useCallback)(e=>{P(e),L(e)},[L]);return(0,n.jsxs)(o.U,{spacing:4,alignItems:"stretch",wrap:"wrap",children:[(0,n.jsx)(l.xu,{flex:"1",minW:"120px",children:(0,n.jsx)(G,{vibe:H[S],color:_,updateColor:D,colors:I})}),(0,n.jsxs)(i.K,{flex:"2",spacing:4,minW:"180px",children:[(0,n.jsx)(a.k,{backgroundColor:C?"black":"white",...T,opacity:1,flex:"1",borderRadius:"md",shadow:"md",minH:"80px",mt:2}),(0,n.jsxs)(o.U,{children:[(0,n.jsxs)(s.v,{children:[(0,n.jsx)(c.j,{w:"100%",as:u.z,size:"sm",variant:"plain",textAlign:"left",rightIcon:(0,n.jsx)(v.G,{icon:g.ptq}),children:H[S].name}),(0,n.jsx)(d.q,{minWidth:"240px",zIndex:"dropdown",children:(0,n.jsx)(m._,{onChange:e=>{let{gradient:t}=M(e,_);r({vibe:e,primaryColor:_.toHexString(),css:t})},value:S,title:b.ag._({id:"1CalO6"}),type:"radio",children:Object.entries(H).map(e=>{let[t,{name:r}]=e;return(0,n.jsx)(h.i,{value:t,children:r},t)})})})]}),(0,n.jsx)(p.h,{size:"sm",variant:"plain",children:(0,n.jsx)(x.kH,{placement:"top",label:(0,n.jsx)(y.cC,{id:"OVjfHO"}),children:(0,n.jsx)(f.h,{icon:(0,n.jsx)(v.G,{icon:g.RJo}),"aria-label":b.ag._({id:"OVjfHO"}),onClick:()=>{D(k().fromRatio({h:j()(0,360),s:1,l:j()(.5,.8)}))}})})})]})]})]})}},98991:function(e,t,r){r.d(t,{Ar:function(){return ed},gJ:function(){return eh},bU:function(){return em},SA:function(){return eg},GT:function(){return ev}});var n=r(52322),o=r(43679),l=r(34071),i=r(39429),a=r(48394),s=r(36371),c=r(73582),u=r(2969),d=r(29117),m=r(3181),h=r(13272),p=r(74105),f=r(20816),g=r(32899),v=r(62614),x=r(17993),y=r(77533),b=r(42946),C=r(49929),j=r(64253),A=r(5879),S=r(87254),k=r(2784),w=r(43271),E=r(23491),_=r(74008),P=r(38035),H=r(55233),I=r(20437),T=r(93493),M=r.n(T),R=r(51499),L=r(85573),G=r(28535),z=r(27875),D=r.n(z),U=r(98621),N=r.n(U),O=r(26845),W=r(56581),F=r(29058);let q=(0,F.G)((e,t)=>{let{color:r,name:o,isActive:l,size:i=8,onClick:a,buttonProps:s}=e,c=(0,w.v5)(r)?"white":"black";return(0,n.jsx)(j.kH,{label:o,placement:"top",isDisabled:!o,children:(0,n.jsx)(v.z,{display:"inline-block",alignSelf:"center",boxSize:i,borderRadius:"md",border:"1px solid",borderColor:"gray.200",color:c,css:(0,w.HO)(r),onClick:()=>null==a?void 0:a(r),variant:"unstyled",minW:i,fontSize:"xs",transitionProperty:"border",transitionDuration:"normal",ref:t,...s,children:l&&(0,n.jsx)(W.n,{})})})});q.displayName="ThemeColorIcon";var B=r(10625),K=r(67046),V=r(99058),X=r(44035),Y=r(39237);let J=e=>{let{mode:t,setMode:r}=e;return(0,n.jsxs)(B.v,{children:[(0,n.jsx)(K.j,{as:v.z,size:"sm",rightIcon:(0,n.jsx)(C.G,{icon:b.ptq,size:"sm"}),minW:24,textAlign:"left",children:t}),(0,n.jsx)(V.q,{children:(0,n.jsx)(X._,{defaultValue:t,value:t,title:"Color Mode",type:"radio",onChange:r,children:["HEX","RGB","HSL"].map(e=>(0,n.jsx)(Y.i,{value:e,children:e},e))})})]})},Q={type:"solid",color:"#FF0000"},Z=e=>{let[t,r]=(0,k.useState)("HEX"),o=e.color||e.defaultColor||Q,l=(0,w.H_)(o),{updateColor:i}=e,a=(0,k.useCallback)(e=>{i({type:"solid",color:e})},[i]);return(0,n.jsxs)(x.g,{align:"start",spacing:4,children:[(0,n.jsx)(ev,{...e}),(0,n.jsxs)(x.g,{children:[(0,n.jsx)(en,{color:l,onChange:a}),(0,n.jsxs)(d.U,{w:"100%",spacing:4,children:[(0,n.jsx)(q,{color:o}),(0,n.jsx)(er,{color:l,onChange:a}),(0,n.jsx)(eo,{color:l,onChange:a})]}),(0,n.jsxs)(d.U,{flex:1,w:"100%",children:[(0,n.jsx)(J,{mode:t,setMode:r}),"HEX"===t&&(0,n.jsx)($,{initialFocusRef:e.initialFocusRef,color:l,updateColor:a,placeholder:Q.color}),"HSL"===t&&(0,n.jsx)(ee,{color:l,updateColor:a}),"RGB"===t&&(0,n.jsx)(et,{color:l,updateColor:a})]})]})]})},$=e=>{let{color:t,updateColor:r,placeholder:o,initialFocusRef:l}=e,[i,a]=(0,k.useState)(t),[s,c]=(0,k.useState)(!1);(0,k.useEffect)(()=>{a(t)},[t]);let u=(0,k.useCallback)(e=>{let t=e.target.value;a(t),(0,E.K_)(t)&&r(t)},[r]),d=(0,k.useCallback)(e=>{let t=(0,O.z)(e.target.value);(0,E.K_)(t)&&r(t)},[r]);return(0,k.useEffect)(()=>{if(l&&!s){var e;null===(e=l.current)||void 0===e||e.select(),c(!0)}},[s,l]),(0,n.jsx)(L.I,{ref:l,size:"sm",type:"text",value:i,onChange:u,onBlur:d,onKeyDown:e=>{"Enter"===e.key&&d(e)},fontFamily:"mono",placeholder:o,"data-testid":"color-picker-text-input-hex"})},ee=e=>{let{color:t,updateColor:r}=e,o=N()(t).toHsl(),[l,i,a]=[o.h,100*o.s,100*o.l],s=e=>{r(N()({h:e,s:i/100,l:a/100}).toHexString())},c=e=>{r(N()({h:l,s:e/100,l:a/100}).toHexString())},u=e=>{r(N()({h:l,s:i/100,l:e/100}).toHexString())};return(0,n.jsxs)(d.U,{children:[(0,n.jsx)(L.I,{size:"sm",type:"number",value:Math.round(l),onChange:e=>s(Number(e.target.value)),min:0,max:360,step:1,flex:1}),(0,n.jsx)(L.I,{size:"sm",type:"number",value:Math.round(i),onChange:e=>c(Number(e.target.value)),min:0,max:100,step:1,flex:1}),(0,n.jsx)(L.I,{size:"sm",type:"number",value:Math.round(a),onChange:e=>u(Number(e.target.value)),min:0,max:100,step:1,flex:1})]})},et=e=>{let{color:t,updateColor:r}=e,o=N()(t).toRgb(),[l,i,a]=[o.r,o.g,o.b],s=e=>{r(N()({r:e,g:i,b:a}).toHexString())},c=e=>{r(N()({r:l,g:e,b:a}).toHexString())},u=e=>{r(N()({r:l,g:i,b:e}).toHexString())};return(0,n.jsxs)(d.U,{children:[(0,n.jsx)(L.I,{size:"sm",type:"number",value:l,onChange:e=>s(Number(e.target.value)),min:0,max:255,step:1,flex:1}),(0,n.jsx)(L.I,{size:"sm",type:"number",value:i,onChange:e=>c(Number(e.target.value)),min:0,max:255,step:1,flex:1}),(0,n.jsx)(L.I,{size:"sm",type:"number",value:a,onChange:e=>u(Number(e.target.value)),min:0,max:255,step:1,flex:1})]})},er=e=>{let{color:t,onChange:r}=e,o=N()(t).toHsv(),[l,i]=(0,k.useState)(o.h);return(0,k.useEffect)(()=>{i(o.h)},[o.h]),(0,n.jsxs)(H.iR,{min:0,max:360,defaultValue:l,value:l,size:"lg",onChange:e=>{i(e),r(N()({h:e,s:o.s,v:o.v}).toHexString())},step:.1,focusThumbOnChange:!1,children:[(0,n.jsx)(H.Uj,{h:3,borderRadius:"full",bgGradient:"linear(to-r, hsl(0, 100%, 50%),  hsl(60, 100%, 50%),  hsl(120, 100%, 50%),  hsl(180, 100%, 50%),  hsl(240, 100%, 50%),  hsl(300, 100%, 50%),  hsl(360, 100%, 50%))"}),(0,n.jsx)(H.gs,{borderWidth:3,borderColor:"white",bg:"hsl(".concat(o.h,", 100%, 50%)"),boxSize:"24px",shadow:"md",outline:"1px solid",outlineColor:"blackAlpha.200"})]})},en=e=>{let{color:t,onChange:r}=e,[o,l]=(0,k.useState)(!1),i=(0,k.useRef)(null),a=(0,k.useRef)(null),s=(0,k.useRef)(null),c=N()(t).toHsv(),u=N()({h:c.h,s:100,v:100}),d=(0,k.useCallback)((e,t)=>{if(!i.current)return;let r=e/i.current.width,n=1-t/i.current.height;return c.s=r,c.v=n,c},[c]),m=(0,k.useCallback)(e=>{if(!i.current)return{x:0,y:0};let t=N()(e).toHsv(),r=t.s,n=t.v;return{x:r*i.current.width,y:(1-n)*i.current.height}},[]),h=(0,k.useCallback)(()=>{let e=i.current,t=null==e?void 0:e.getContext("2d");if(!e||!t)return;let r=e.width,n=e.height,o=t.createLinearGradient(0,0,r,0);o.addColorStop(0,"white"),o.addColorStop(1,u.toHexString()),t.fillStyle=o,t.fillRect(0,0,r,n);let l=t.createLinearGradient(0,0,0,n);l.addColorStop(0,"rgba(0,0,0,0)"),l.addColorStop(1,"black"),t.fillStyle=l,t.fillRect(0,0,r,n)},[u]),p=(0,k.useCallback)((e,t)=>{if(!i.current||!a.current)return{x:0,y:0};let r=i.current.clientWidth,n=i.current.clientHeight,o=D()(e,0,r),l=D()(t,0,n);return a.current.style.left="".concat(o,"px"),a.current.style.top="".concat(l,"px"),{x:o,y:l}},[]);(0,k.useEffect)(()=>{h();let{x:e,y:r}=m(t);p(e,r)},[t,m,h,p]);let f=(0,k.useCallback)(e=>{if(!s.current)return;let t=s.current.getBoundingClientRect(),{x:n,y:o}=p(e.clientX-t.left,e.clientY-t.top),l=d(n,o);l&&(r(N()(l).toHexString()),e.preventDefault())},[r,d,p]),g=(0,k.useCallback)(e=>{l(!1),e.preventDefault()},[]),v=(0,k.useCallback)(e=>{l(!0),f(e),e.preventDefault()},[f]);return(0,k.useEffect)(()=>{if(o)return document.addEventListener("mousemove",f),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g)}},[f,g,o]),(0,n.jsxs)(G.xu,{pos:"relative",ref:s,onMouseDown:v,children:[(0,n.jsx)(G.xu,{ref:a,pos:"absolute",w:5,h:5,border:"2px solid white",borderRadius:"full",transform:"translate(-50%, -50%) scale(".concat(o?1.2:1,")"),boxShadow:"md",transitionProperty:"transform",transitionDuration:"normal",bg:N()(t).toHexString(),outline:"1px solid",outlineColor:"blackAlpha.200"}),(0,n.jsx)(G.xu,{as:"canvas",ref:i,width:"100%",height:"150px",borderRadius:"md",shadow:"base",border:"1px solid",borderColor:"gray.200"})]})},eo=e=>{let{onChange:t}=e,r=(0,k.useCallback)(()=>{new window.EyeDropper().open().then(e=>{t(e.sRGBHex)}).catch(e=>{console.error("Eyedropper error:",e)})},[t]);return"EyeDropper"in window?(0,n.jsx)(g.h,{size:"sm",icon:(0,n.jsx)(C.G,{fixedWidth:!0,icon:b.KTG}),onClick:r,variant:"ghost","aria-label":S.ag._({id:"A94+Ww"})}):null},el=e=>{let[t,r]=(0,k.useState)("HEX"),{updateColor:o,color:l}=e,[i,a]=(0,k.useState)(0),s=l.stops[i],c=(0,k.useCallback)((e,t)=>{let r=[...l.stops];void 0===t?(r.splice(e,1),a(Math.min(e,r.length-1))):(r[e]=t,a(e)),o({...l,stops:r})},[l,o]),u=(0,k.useCallback)(e=>{let t=[...l.stops];t.push(e),t.sort((e,t)=>e.position-t.position),a(M()(t,e)),o({...l,stops:t})},[l,o]),m=(0,k.useCallback)(e=>{c(i,{...s,color:e})},[s,i,c]);return(0,n.jsxs)(x.g,{align:"start",spacing:4,children:[(0,n.jsx)(ei,{...e,addStop:u,currentStop:s,updateStop:c,currentStopIndex:i,setCurrentStopIndex:a}),(0,n.jsx)(ev,{...e,updateColor:e=>{"linear-gradient"===e.type?o(e):m(null==e?void 0:e.color)}}),(0,n.jsx)(_.i,{}),(0,n.jsxs)(x.g,{children:[(0,n.jsx)(en,{color:s.color,onChange:m}),(0,n.jsxs)(d.U,{w:"100%",spacing:4,children:[(0,n.jsx)(q,{color:l}),(0,n.jsx)(er,{color:s.color,onChange:m}),(0,n.jsx)(eo,{color:s.color,onChange:m})]}),(0,n.jsxs)(d.U,{flex:1,w:"100%",children:[(0,n.jsx)(J,{mode:t,setMode:r}),"HEX"===t&&(0,n.jsx)($,{initialFocusRef:e.initialFocusRef,color:s.color,updateColor:m,placeholder:Q.color}),"HSL"===t&&(0,n.jsx)(ee,{color:s.color,updateColor:m}),"RGB"===t&&(0,n.jsx)(et,{color:s.color,updateColor:m})]}),(0,n.jsx)(ea,{...e})]})]})},ei=e=>{let{color:t,updateStop:r,currentStopIndex:o,setCurrentStopIndex:l,addStop:i}=e,{stops:a}=t,s=a.length>2,c=a.length<5;return(0,n.jsxs)(d.U,{w:"100%",spacing:0,children:[(0,n.jsx)(P.k,{borderRadius:"full",background:(0,R.HC)({...t,angle:90}),pos:"relative",h:3,border:"1px solid",borderColor:"gray.200",flex:1,mr:2,children:a.map((e,t)=>{let i=t===o;return(0,n.jsx)(P.k,{pos:"absolute",inset:0,top:-1.5,children:(0,n.jsxs)(H.iR,{size:"lg",value:e.position,min:0,max:100,step:1,onChange:n=>{r(t,{...e,position:n})},onClick:()=>l(t),children:[(0,n.jsx)(H.Uj,{bg:"transparent",h:3}),(0,n.jsx)(H.gs,{borderWidth:3,borderColor:"white",boxSize:"24px",shadow:"md",outline:i?"2px solid":"1px solid",outlineColor:i?"trueblue.300":"blackAlpha.200",bg:e.color})]})},t)})}),(0,n.jsx)(j.kH,{label:(0,n.jsx)(A.cC,{id:"VztmP9"}),children:(0,n.jsx)(g.h,{icon:(0,n.jsx)(C.G,{icon:b.XAH}),"aria-label":S.ag._({id:"VztmP9"}),onClick:()=>r(o,void 0),size:"sm",variant:"ghost",isDisabled:!s})}),(0,n.jsx)(j.kH,{label:(0,n.jsx)(A.cC,{id:"MKajKJ"}),children:(0,n.jsx)(g.h,{icon:(0,n.jsx)(C.G,{icon:b.r8p}),"aria-label":S.ag._({id:"MKajKJ"}),onClick:()=>{i(es(t))},size:"sm",variant:"ghost",isDisabled:!c})})]})},ea=e=>{let{color:t,updateColor:r}=e;return(0,n.jsxs)(x.g,{align:"start",w:"100%",children:[(0,n.jsx)(y.x,{fontWeight:"600",fontSize:"sm",color:"gray.500",children:(0,n.jsx)(A.cC,{id:"YMybpT"})}),(0,n.jsx)(I.M,{columns:4,spacing:2,w:"100%",children:ec.map(e=>{let o=t.angle===e.value;return(0,n.jsx)(q,{color:{...t,angle:e.value},onClick:()=>r({...t,angle:e.value}),isActive:o,buttonProps:{w:"100%"},name:e.label},e.value)})})]})},es=e=>{let t=e.stops[0],r=e.stops[1],n=e.stops.reduce((n,o,l)=>{let i=e.stops[l+1];if(!i)return n;let a=i.position-o.position;return a>n.distance?(t=o,r=i,{distance:a,position:o.position+a/2}):n},{distance:0,position:0});return{color:(0,E.Py)(t.color,r.color,n.position/100),position:n.position}},ec=[{label:"0\xb0",value:0},{label:"45\xb0",value:45},{label:"90\xb0",value:90},{label:"135\xb0",value:135},{label:"180\xb0",value:180},{label:"225\xb0",value:225},{label:"270\xb0",value:270},{label:"315\xb0",value:315}],eu=(0,F.G)((e,t)=>{let{color:r,updateColor:o,defaultColor:l={type:"solid",color:"#000000"},onClick:i,canReset:a,dataTestId:s}=e;return(0,n.jsxs)(p.B,{size:"md","data-testid":s,children:[(0,n.jsx)(L.I,{type:"text",placeholder:l?"".concat((0,w.Fz)(l)," ").concat(S.ag._({id:"P9Cyl9"})):S.ag._({id:"ovBPCi"}),value:r?(0,w.Fz)(r):"",readOnly:!0,fontFamily:"monospace",bg:"white",onFocus:i}),(0,n.jsx)(f.Z,{children:(0,n.jsx)(q,{color:r||l,ref:t,onClick:i,size:7})}),a&&(0,n.jsx)(f.x,{children:(0,n.jsx)(j.kH,{label:(0,n.jsx)(A.cC,{id:"L+rMC9"}),placement:"top",children:(0,n.jsx)(g.h,{"aria-label":S.ag._({id:"cnGeoo"}),variant:"ghost",onClick:()=>o(void 0),icon:(0,n.jsx)(C.G,{icon:b.X7o}),size:"sm",colorScheme:"red"})})})]})});eu.displayName="ThemeColorPickerInput";let ed=e=>{let t=(0,k.useRef)(null);return(0,n.jsxs)(o.J,{isLazy:!0,strategy:"fixed",modifiers:[{name:"preventOverflow",options:{altAxis:!0}}],initialFocusRef:t,children:[(0,n.jsx)(l.x,{children:(0,n.jsx)(eu,{...e,canReset:!!(e.color&&e.defaultColor)})}),(0,n.jsx)(i.y,{zIndex:"modalPopover",border:"1px solid",borderColor:"gray.100",children:(0,n.jsx)(a.b,{children:(0,n.jsx)(ef,{...e,initialFocusRef:t})})})]})},em=e=>(0,n.jsx)(ed,{...e,solidOnly:!0}),eh=e=>(0,n.jsx)(ed,{...e}),ep=["solid","linear-gradient"],ef=e=>{let{color:t,updateColor:r,solidOnly:o}=e,l=(null==t?void 0:t.type)||"solid",i=ep.indexOf(l),a=(0,k.useCallback)(e=>{let n=ep[e];if(l===n)return;let o=(0,w.H_)(t||Q);"solid"===n?r({color:o,...t,type:"solid"}):"linear-gradient"===n&&r({stops:[{color:o,position:0},{color:(0,E.DT)(o,(0,E.DP)(o)?20:-20),position:100}],angle:45,...t,type:"linear-gradient"})},[l,t,r]);return o?(0,n.jsx)(Z,{...e}):(0,n.jsxs)(s.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:i,onChange:a,children:[(0,n.jsxs)(c.t,{children:[(0,n.jsx)(u.O,{children:(0,n.jsxs)(d.U,{children:[(0,n.jsx)(C.G,{icon:b.AVo,fixedWidth:!0}),(0,n.jsx)(A.cC,{id:"5bi1la"})]})}),(0,n.jsx)(u.O,{children:(0,n.jsxs)(d.U,{children:[(0,n.jsx)(C.G,{icon:b.AIW,fixedWidth:!0}),(0,n.jsx)(A.cC,{id:"/S8bMP"})]})})]}),(0,n.jsxs)(m.n,{children:[(0,n.jsx)(h.x,{p:0,pt:4,children:(0,n.jsx)(Z,{...e})}),(0,n.jsx)(h.x,{p:0,pt:4,children:(0,n.jsx)(el,{...e,color:t})})]})]})},eg=e=>{let{colors:t,updateColors:r,buttonLabel:o,maxColors:l=10,minColors:i=0,theme:a,palette:s,solidOnly:c}=e,u=(0,k.useCallback)(e=>{let n=[...t];n.splice(e,1),r(n)},[t,r]),d=(0,k.useCallback)((e,n)=>{if(!n){u(e);return}let o=[...t];o[e]=n,r(o)},[t,r,u]),m=(0,k.useCallback)(()=>{r([...t,Q])},[t,r]);return(0,n.jsxs)(n.Fragment,{children:[t.map((e,r)=>(0,n.jsxs)(p.B,{mb:2,css:{isolation:"unset"},children:[(0,n.jsx)(eh,{theme:a,color:e,updateColor:e=>d(r,e),palette:s,solidOnly:c}),t.length>i&&(0,n.jsx)(f.x,{children:(0,n.jsx)(j.kH,{label:(0,n.jsx)(A.cC,{id:"DXNS21"}),placement:"top",children:(0,n.jsx)(g.h,{"aria-label":S.ag._({id:"cnGeoo"}),variant:"ghost",size:"sm",colorScheme:"red",onClick:()=>u(r),icon:(0,n.jsx)(C.G,{icon:b.XAH})})})})]},r)),t.length<l&&(0,n.jsx)(v.z,{onClick:m,variant:"plain",size:"sm",leftIcon:(0,n.jsx)(C.G,{icon:b.r8p}),children:o||(0,n.jsx)(A.cC,{id:"Fz6khn"})})]})},ev=e=>{let{theme:t,color:r,updateColor:o,solidOnly:l=!1,palette:i="theme"}=e,a=[];return("theme"===i?a=(0,w.X)(t,l):"accent"===i&&(a=(0,w.i4)(t)),l&&(a=a.filter(w.vC)),0===a.length)?null:(0,n.jsxs)(x.g,{align:"start",children:[(0,n.jsx)(y.x,{fontWeight:"600",fontSize:"sm",color:"gray.500",children:(0,n.jsx)(A.cC,{id:"DNUgpN"})}),(0,n.jsx)(d.U,{wrap:"wrap",children:a.map((e,t)=>(0,n.jsx)(q,{name:(0,w.vC)(e)?(0,w.Fz)(e):void 0,color:e,onClick:o,isActive:r&&(0,w.zc)(r,e)},t))})]})}},45462:function(e,t,r){r.d(t,{a:function(){return s}});var n=r(2784),o=r(69971),l=r(71383),i=r(92566),a=r(97134);let s=()=>{let e=(0,a.n_)(),t=(0,l.TL)(),{data:r,loading:s}=(0,o.BCl)({variables:{workspaceId:e,archived:!1},skip:!e,fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),{data:c,loading:u}=(0,o.BCl)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),d=(0,n.useMemo)(()=>(null==c?void 0:c.themes)||[],[null==c?void 0:c.themes]),m=(0,n.useMemo)(()=>(null==r?void 0:r.themes)||[],[null==r?void 0:r.themes]);return(0,n.useEffect)(()=>{d.length>0&&t((0,i.cn)({globalThemes:d}))},[t,d]),(0,n.useEffect)(()=>{m.length>0&&t((0,i.PA)({workspaceThemes:m}))},[t,m]),{isLoadingThemes:s||u,globalThemes:d}}},26845:function(e,t,r){r.d(t,{c:function(){return c},z:function(){return d}});var n=r(52322),o=r(2784),l=r(43997),i=r(98991),a=r(43271),s=r(78112);let c=e=>{let{currentAttributes:t,updateAttributes:r}=e,c=(0,l.v9)(s.Pu),u=(0,o.useCallback)(e=>r({hex:(0,a.H_)(e)}),[r]);if("string"==typeof t)return u(t),(0,n.jsx)(n.Fragment,{});let{hex:d}=t;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.bU,{color:{type:"solid",color:d},updateColor:u,theme:c,palette:"theme"})})},u=e=>e.replaceAll("#","").replaceAll(/[^A-Fa-f0-9]/g,"").slice(0,6),d=e=>{let t=u(e),r="";switch(t.length){case 0:return"";case 1:for(let e=0;e<6;e++)r+=t;break;case 2:for(let e=0;e<3;e++)r+=t;break;case 3:case 4:case 5:r=t.slice(0,3).split("").map(function(e){return e+e}).join("");break;default:r=t}return"#"+r.toUpperCase()}},42616:function(e,t,r){r.d(t,{Ay:function(){return v},E0:function(){return h},HD:function(){return p},I7:function(){return g},K9:function(){return m},Nn:function(){return f}});var n=r(37243),o=r(1842),l=r.n(o),i=r(27191),a=r(71383),s=r(78112),c=r(33945),u=r(31335),d=r(65050);let m=n.hj.create({name:"cardCollapse",addKeyboardShortcuts:()=>({Escape:e=>{let{editor:t}=e,r=(0,a.bh)();if((0,s.gh)(r.getState())!==c.q.DOC_VIEW)return!1;let{selection:o}=t.state;if(!o.empty)return!1;let l=(0,n.Kk)(u.KH)(o);return!!l&&l.depth>d.k_&&!p(l.node)&&(f(l.node.attrs.id,!0),!0)}}),addProseMirrorPlugins:()=>[new i.Sy({key:new i.H$("cardCollapse"),appendTransaction:(e,t,r)=>{if(r.selection.eq(t.selection)||!r.selection.empty)return;let o=(0,n.Kk)(u.KH)(r.selection);if(!o)return;let{node:l,pos:a}=o;if(p(l))try{let{tr:e}=r,t=i.qv.create(e.doc,a);if(!t)return;return e.setSelection(t)}catch(e){console.error("Error moving selection out of collapsed card",{node:l,pos:a},e)}}})]}),h=(e,t)=>{let r=[],n=[];e.descendants((e,t,o)=>{if(!(0,u.KH)(e))return;let{id:l}=e.attrs;o&&"document"===o.type.name?r.push(l):n.push(l)}),t((0,s.rH)({cardIds:r,isCollapsed:!1})),t((0,s.rH)({cardIds:n,isCollapsed:!0}))},p=e=>{let t="string"==typeof e?e:e.attrs.id;if(!t)return;let r=(0,a.bh)().getState();return(0,s.yH)(t)(r)},f=(e,t)=>{if(l()(e)){console.error("[setCardCollapsed] Input is unexpectedly not string | string[]: ",e);return}let r=Array.isArray(e)?e:[e],n=(0,a.bh)();(1!==r.length||(0,s.yH)(r[0])(n.getState())!==t)&&n.dispatch((0,s.rH)({cardIds:r,isCollapsed:t}))},g=e=>{let t=[];e.state.doc.descendants(e=>{if(!(0,u.KH)(e))return;let{id:r}=e.attrs;t.push(r)}),f(t,!1)},v=e=>{let t=(0,a.bh)();void 0===t.getState().TipTap.memoState.expandedCards[e]&&t.dispatch((0,s.rH)({cardIds:[e],isCollapsed:!1}))}},23186:function(e,t,r){r.d(t,{AQ:function(){return g},J9:function(){return f},NE:function(){return j},YS:function(){return y},jz:function(){return b},pE:function(){return v}});var n=r(37243),o=r(27191),l=r(71383),i=r(52659),a=r(24151),s=r(78112),c=r(12971),u=r(28817),d=r(33945),m=r(42616),h=r(65050),p=r(54317);let f=(e,t,r)=>{let o=e=>{let t=(0,p.KH)(e),n="boolean"!=typeof r||(0,m.HD)(e)===r;return t&&n},l=e.state.doc.nodeAt(t),i=e.state.doc.resolve(t);return l&&o(l)?{node:l,pos:t,start:i.start,depth:i.depth}:(0,n.qv)(e.state.doc.resolve(t),o)},g=(e,t)=>{try{let r=(e,t)=>(0,p.KH)(e)&&t===h.k_,n=e.resolve(t),o=e.nodeAt(t);if(o&&r(o,n.depth+1))return{node:o,pos:t};return(0,c.Ci)(n,r)}catch(e){console.error("[findTopCardNodeParent] error",e);return}},v=e=>{let{pos:t,editor:r}=e,n=(0,c.nv)(r.state.doc.resolve(t),p.KH).map(e=>e.node.attrs.id);(0,m.Nn)(n,!1)},x=async e=>{let{cardId:t,pos:r,editor:n,cardEl:l,isNested:s=!1,origin:c="editor"}=e;if(!l){console.error("[scrollToCard] no cardEl specified");return}(0,m.Nn)(t,!1),v({pos:r,editor:n}),await (0,i.cC)("editor").scrollElementIntoView({element:l,delay:s?h.nY:0}),n.commands.command(e=>{let{tr:t}=e;return t.setSelection(o.Y1.near(n.state.doc.resolve(r))).setMeta(a.C,c),!0})},y=e=>{let{cardId:t,editor:r}=e;if(!t)return;let n=(0,l.bh)();if((0,s.gh)(n.getState())===d.q.SLIDE_VIEW){r.commands.spotlightCardById(t);return}let o=document.querySelector('[data-card-id="'.concat(t,'"]'));if(!o)return;let{pos:i}=(0,p.Bw)(r,t)||{};if(!i)return;let a=r.state.doc.resolve(i).depth>h.k_;x({cardId:t,pos:i,editor:r,cardEl:o,isNested:a})},b=(e,t,r)=>{let n;let o=t.target;if(o.closest(".".concat(h.ar))&&!o.closest("[data-outside-card-body]")||r&&!C(r,e.state.schema))return null;let l=o.closest(".".concat(h.vD));if(!l)return{pos:e.state.doc.content.size-1};let i=l.querySelector(".".concat(h.ar)),a=null==i?void 0:i.getBoundingClientRect();if(!a)return null;let{doc:s}=e.state;try{let t=e.posAtDOM(l,0);if(-1===t)return null;let r=(0,c.nv)(s.resolve(t),p.KH);if(0===r.length)return null;n=r[r.length-1]}catch(e){return console.error("(caught) [checkBetweenCardsDropTarget] error finding parent node:",e),null}let{node:d,pos:m}=n;if(!m||!d)return null;let[f]=(0,u.qs)(i),g=f+a.top,v=f+a.bottom,x=f+t.clientY;return x<g?{pos:m}:x>v?{pos:m+d.nodeSize}:null},C=(e,t)=>t.nodes.card.validContent(e.content),j=(e,t)=>{let r=(0,c.sS)(e,e=>"cardLayoutItem"===e.type.name);return r.length>0?{node:r[0].node,pos:t+r[0].pos+1}:{node:e,pos:t}}},62136:function(e,t,r){r.d(t,{F:function(){return n}});let n=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[].slice.call(e.querySelectorAll(t),0);return r&&n.reverse(),n}},44884:function(e,t,r){r.d(t,{e:function(){return i},v:function(){return l}});var n=r(82807),o=r(98835);let l=e=>{var t;if(null==e?void 0:null===(t=e.parentElement)||void 0===t?void 0:t.matches("ol, ul"))return e.parentElement;let r=[e],o=e;for(;(o=o.nextElementSibling)&&"LI"===o.tagName;){let t=parseInt(o.getAttribute("indent")||"0")-parseInt(e.getAttribute("indent")||"0");if(t<0)break;if(0==t){if(o.getAttribute("variant")!=e.getAttribute("variant"))break;r.push(o)}else o=l(o),r.push(o)}let i=e.getAttribute("variant")==n.W.Numbered?document.createElement("ol"):document.createElement("ul");return e.replaceWith(i),r.forEach(e=>{e.removeAttribute("variant"),e.removeAttribute("indent")}),i.append(...r),i},i=e=>{var t,r;let l;let i=e,a=0,s="false";for(e.innerHTML.startsWith("[ ]")?(l=n.W.Todo,s="false",e.innerHTML.startsWith("[ ]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)):e.innerHTML.startsWith("[x]")&&(l=n.W.Todo,s="true",e.innerHTML.startsWith("[x]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)),"checkbox"===e.getAttribute("role")&&(l=n.W.Todo,s=e.getAttribute("aria-checked")||"false"),("todo"===e.getAttribute("variant")||e.getAttribute("checked"))&&(l=n.W.Todo,s=e.getAttribute("checked")||"false"),(0,o.b)(e);i=null===(t=e.parentElement)||void 0===t?void 0:t.closest("li, ul, ol");){if(i.matches("ul, ol")){a++;let e=i.className.match(/lst-kix_\w+-(\d+)/);e&&(a=parseInt(e[1])+1);let t=i.getAttribute("indent");t&&(a=parseInt(t,10)+1),l||"OL"!=i.tagName?l||"UL"!=i.tagName||(l=n.W.Bullet):l=n.W.Numbered}i.after(e)}e.setAttribute("indent",Math.max(a-1,0).toString()),e.setAttribute("variant",l||n.W.Bullet),l==n.W.Todo&&e.setAttribute("checked",s),1===e.children.length&&(null===(r=e.firstElementChild)||void 0===r?void 0:r.tagName)==="P"&&(e.innerHTML=e.firstElementChild.innerHTML),e.querySelectorAll('span[class^="ListLabel_"]').forEach(e=>{e.remove()})}},82631:function(e,t,r){r.d(t,{S:function(){return l}});var n=r(62136),o=r(44884);let l=e=>((0,n.F)(e,"li").forEach(e=>{(0,o.v)(e)}),e)},98835:function(e,t,r){r.d(t,{b:function(){return C},B:function(){return y}});var n=r(48972),o=r(97912),l=r(62136);let i=e=>{(0,l.F)(e,"p.title").forEach(d),(0,l.F)(e,"br").forEach(u),(0,l.F)(e,"a[href]").forEach(h),(0,l.F)(e,"a[href][id]").forEach(p),(0,l.F)(e,"span").forEach(f),(0,l.F)(e,"a[href][id]").forEach(t=>v(t,e))},a=e=>{(0,l.F)(e,"h1").forEach(s),(0,l.F)(e,"li > span").forEach(c)},s=e=>{if("always"==e.style.pageBreakBefore){let t=document.createElement("hr");t.style.pageBreakBefore="always",t.classList.add("divider"),e.before(t)}},c=e=>{var t;(null===(t=e.textContent)||void 0===t?void 0:t.trim())==="•"&&e.remove()},u=e=>{var t;((null===(t=e.previousElementSibling)||void 0===t?void 0:t.tagName)=="P"||e.classList.contains("Apple-interchange-newline"))&&e.remove()},d=e=>{let t=document.createElement("h1");t.className="title",t.innerHTML=e.innerHTML,e.replaceWith(t)},m=/^https:\/\/docs\.google\.com\/document\/d\/[^/]+\/edit#heading=(h\.[^/]+)/,h=e=>{let t=e.getAttribute("href");if(t&&(t.startsWith("#h.")||m.test(t))){let t=e.closest("p");t&&t.textContent==e.textContent?t.remove():e.removeAttribute("href")}},p=e=>{var t,r;if(null===(t=e.getAttribute("id"))||void 0===t?void 0:t.startsWith("cmnt_ref")){let t=e.closest("sup");null==t||t.remove()}else if(null===(r=e.getAttribute("id"))||void 0===r?void 0:r.startsWith("cmnt")){let t=e.closest("div");null==t||t.remove()}},f=e=>{e.innerHTML=e.innerHTML.replace(/(&nbsp;){2,}/g,"").replace(/&nbsp;/g," ")},g=/ftnt_ref(\d+)/,v=(e,t)=>{let r=e.getAttribute("id");if(r&&r.startsWith("ftnt_ref")){var n;let o=parseInt((null===(n=r.match(g))||void 0===n?void 0:n[1])||""),l=e.closest("sup"),i=t.querySelector("#ftnt".concat(o)),a=null==i?void 0:i.closest("div");if(!o||!l||!a)return;null==i||i.remove();let s=document.createElement("div");s.className="imported-footnote",s.appendChild(a),l.replaceWith(s)}};var x=r(44884);let y=e=>{try{let t=new DOMParser().parseFromString(e,"text/html");return(0,l.F)(t,b).forEach(C),(0,l.F)(t,"li",!0).forEach(x.e),(0,l.F)(t,"img").forEach(j),(0,l.F)(t,"img").forEach(S),(0,l.F)(t,"script, style").forEach(e=>e.remove()),a(t),i(t),(0,l.F)(t,"p").forEach(A),t.body.innerHTML}catch(t){return console.error("Error transforming pasted HTML",t),e}},b="p, h1, h2, h3, h4, h5, h6",C=e=>{e.querySelectorAll(b).forEach(e=>{if(e.tagName.match(/H\d/)){let t=document.createElement("b");t.innerHTML=e.innerHTML,e.replaceWith(t)}e.replaceWith(...e.childNodes)})},j=e=>{let t=e.closest("p, h1, h2, h3, h4, h5, h6, ul, ol, li");t&&t.after(e)},A=e=>{if((0,n.np)(e)){var t;(null===(t=e.parentElement)||void 0===t?void 0:t.childElementCount)!==1&&e.remove()}},S=e=>{if(e.src){if(e.src.startsWith("data:")){let t=(0,o.v9)(e.src),r=URL.createObjectURL(t);e.src=r}else e.src.startsWith("blob:")||e.src.startsWith("http")||e.remove()}}},48972:function(e,t,r){r.d(t,{G8:function(){return s},Xb:function(){return l},np:function(){return a}});var n=r(30764),o=r(82631);let l=(e,t,r)=>{null!=r||(r=n.PW.fromSchema(t));let l=r.serializeFragment(e);return(0,o.S)(l)},i=["img"],a=e=>{var t;return!e.hasChildNodes()||!((null===(t=e.textContent)||void 0===t?void 0:t.trim())!=""||i.includes(e.nodeName))&&[...e.childNodes].every(e=>a(e))},s=(e,t,r)=>{let n=l(e,t,r),o=document.createElement("div");return o.appendChild(n),o.innerHTML}},82807:function(e,t,r){var n,o;r.d(t,{W:function(){return n},y:function(){return l}}),(o=n||(n={})).Todo="todo",o.Bullet="bullet",o.Numbered="numbered";let l=e=>["todo","bullet","numbered"].includes(e.type.name)}}]);
//# sourceMappingURL=7245-109c6571ad6ea86b.js.map