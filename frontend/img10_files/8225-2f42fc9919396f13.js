(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8225],{14568:function(e,t,n){"use strict";let r;n.d(t,{z:function(){return eF}});var s=n(52322);n(56414);var i=n(55671),o=n(62202),a=n(78360),l=n(81674),c=n(64253),d=n(97729),u=n.n(d),h=n(5632),f=n(2784),p=n(43997),g=n(95405),m=n(12483),w=n(69971),y=n(49414);let b=e=>{let t=["malformed","encoded","illegal"];return e.includes("URIError")&&e.split(" ").some(e=>t.includes(e))};class v extends f.Component{componentDidMount(){window.addEventListener("error",this.handleError),window.addEventListener("unhandledrejection",this.handleUnhandledRejection)}componentWillUnmount(){window.removeEventListener("error",this.handleError),window.removeEventListener("unhandledrejection",this.handleUnhandledRejection)}componentDidCatch(e,t){if("dev"===g.v.APPLICATION_ENVIRONMENT)throw e;m.Tb(e,{extra:{info:null==t?void 0:t.componentStack}})}static getDerivedStateFromError(e){return{hasError:!0,errMessage:e.message,shouldMountChildren:!1}}handleError(e){if("dev"===g.v.APPLICATION_ENVIRONMENT)throw Error("[ErrorBoundary]: ".concat(e.message))}handleUnhandledRejection(e){if(this.props.unhandledRejectionFilter(e)){var t;let n=(null===(t=e.reason)||void 0===t?void 0:t.message)||"";this.setState({hasError:!0,errMessage:n})}}render(){let e=!0===b(this.state.errMessage)?{opacity:"0.65",starOverlay:!1}:{};return(0,s.jsxs)(s.Fragment,{children:[this.state.hasError&&(0,s.jsx)(y.q,{pos:"absolute",top:0,...e,errMessage:""===this.state.errMessage?void 0:this.state.errMessage,showDisclosure:!0}),this.state.shouldMountChildren&&this.props.children]})}constructor(e){super(e),this.state={hasError:!1,errMessage:"",shouldMountChildren:!0},this.handleError=this.handleError.bind(this),this.handleUnhandledRejection=this.handleUnhandledRejection.bind(this)}}v.defaultProps={unhandledRejectionFilter:e=>{var t;return!!b((null===(t=e.reason)||void 0===t?void 0:t.message)||"")||e.reason instanceof w.YBv&&!1===document.hidden||e.reason instanceof w.R5s}},n(61036),n(62376),n(6991),n(76298),n(4466),n(43839),n(40917);var x=n(14625),E=n(69962),S=n(60094),j=n(54901),_=n(58974),C=n(16202),I=n(71383);let O=e=>{console.debug("%c[useApiRefetch] Refetching due to ".concat(e),"background-color: aqua"),(0,j.WQ)().reFetchObservableQueries()},D=()=>{let e=(0,I.qr)(),t=(0,f.useRef)(!1),n=(0,f.useRef)(null),r=(0,f.useCallback)(e=>{n.current&&(clearTimeout(n.current),n.current=null),n.current=setTimeout(()=>{O(e),n.current=null},3e3)},[]),s=(0,f.useCallback)(()=>(0,C.aF)(e.getState()).backgrounded,[e]);(0,_.js)("online",(0,f.useCallback)(()=>{if(s()){t.current=!0;return}r("online")},[r,s])),(0,_.js)("wakeup",(0,f.useCallback)(()=>{if(s()){t.current=!0;return}r("wakeup")},[r,s])),(0,_.js)("foreground",(0,f.useCallback)(()=>{t.current&&(r("foreground"),t.current=!1)},[r]))},T=Number(new URLSearchParams(g.v.IS_CLIENT_SIDE?window.location.search:"").get("MAX_BACKGROUND_TIME_ALLOWED"))||432e5,k=()=>{let e=(0,f.useRef)(!1),t=(0,f.useCallback)(t=>{t.timeInBackground&&!e.current&&t.timeInBackground>T&&(e.current=!0,window.location.reload())},[]);(0,_.js)("foreground",t)},R=(0,f.memo)(()=>((0,_.i6)(),D(),k(),null));R.displayName="ConnectionMonitor";var A=n(73235),N=n(42795),P=n(17861);function M(){let e=(0,A._)(["^",""]);return M=function(){return e},e}var L=n(52138),U=n(30240),H=n(70212),F=n(99092),G=n(31601),q=n(97134);let z=(e,t)=>{F.H.init(g.v.HIGHLIGHT_PROJECT_ID,{environment:g.v.APPLICATION_ENVIRONMENT,sessionShortcut:!!t&&"shift+command+0",enableStrictPrivacy:e,enableSegmentIntegration:!0,networkRecording:{enabled:!0,recordHeadersAndBody:!0}}),G.co.loadSdkPromise.then(e=>{e&&e.addSourceMiddleware(F.LZ)})},V=e=>{let{children:t}=e,{user:n,anonymousUser:r,isGammaOrgUser:i,isUserLoading:o}=(0,q.SE)(),{enabled:a,enableStrictPrivacy:l}=(0,U.ye)("highlight");return(0,f.useEffect)(()=>{a&&!o&&n&&z(l,i)},[l,a,i,o,n]),(0,f.useEffect)(()=>{if(!o){if(n){let{id:e,displayName:t,email:r,profileImageUrl:s}=n;F.H.identify(e,{highlightDisplayName:t,email:r,avatar:s})}else if(null==r?void 0:r.id){let{id:e,displayName:t}=r;F.H.identify("",{anonDisplayName:t||"",anonId:e})}}},[n,r,o]),(0,s.jsx)(s.Fragment,{children:t})};var B=n(36660),K=n(87254),Q=n(5879),X=n(78316),Y=n(66576),W=n(29469);let Z=e=>{let{children:t}=e;return(0,Y.K)(),(0,X.b)(),(0,W.U)(),(0,s.jsx)(Q.bd,{i18n:K.ag,children:t})};var $=n(83639),J=n(53650),ee=n(69341),et=n(89328),en=n(9010),er=n(49803),es=n(30733),ei=n.n(es),eo=n(12753);class ea{async enable(){try{await window.serwist.register()}catch(e){console.error("Error registering Serwist service worker:",e)}}async disable(){try{for(let e of(await navigator.serviceWorker.getRegistrations()))console.log("Unregistering service worker:",e),await e.unregister()}catch(e){console.error("Error unregistering Serwist service worker:",e)}try{await this.clearCaches()}catch(e){console.error("Error clearing caches",e)}this.store.dispatch((0,eo.Dz)())}async debug(){let e=await window.caches.keys();return{cache:(await Promise.all(e.map(async e=>{let t=await window.caches.open(e).then(e=>e.matchAll());return[e,t]}))).reduce((e,t)=>(e[t[0]]=t[1],e),{})}}async gc(e){}async clearCaches(){try{if(!window.caches)return;for(let e of(await window.caches.keys()))await window.caches.delete(e);console.log("Serwist caches cleared successfully")}catch(e){console.error("Error clearing caches",e)}}constructor(){this.store=(0,I.bh)()}}let el=ei()(()=>new ea);var ec=n(43848),ed=n(31240),eu=n(54073),eh=n.n(eu),ef=n(18149),ep=n.n(ef);let eg="offline-state-v1",em=e=>{let t=ew(),n=null;t&&(console.log("[Offline] LOADING PERSISTED STATE",t),e.dispatch((0,eo.m0)(t)),n=t);let r=eh()(e=>{ey(e)},500);return e.subscribe(()=>{let t=(0,eo.S_)(e.getState());if(n!==t){if(performance.now(),ep()(n,t)){n=t,performance.now();return}n=t,console.log("[Offline] PERSISTING STATE",t),r(t)}})},ew=()=>{try{let e=localStorage.getItem(eg);return JSON.parse(e)}catch(e){return null}},ey=async e=>{try{let t=JSON.stringify(e);localStorage.setItem(eg,t)}catch(e){console.error("Error persisting state",e)}},eb="undefined"!=typeof navigator&&"serviceWorker"in navigator&&"indexedDB"in window&&"localStorage"in window&&ed.p;class ev{get enabled(){return(0,eo.aL)(this.store.getState())}async init(){if(!eb){console.log("Offline mode is not supported");return}this.cleanupFns.push(em(this.store)),await this.notifyCaches(this.enabled),console.log("OfflineManager caches initialized",this.enabled),this.setupFeatureFlagSubscription(),this.setupConnectionListener(),console.log("OfflineManager subscriptions initialized")}setupConnectionListener(){let e=et.L.on("offline",()=>{this.apolloOfflineCache.useOfflineCache()}),t=et.L.on("online",()=>{this.apolloOfflineCache.backOnline()});this.cleanupFns.push(t),this.cleanupFns.push(e)}setupFeatureFlagSubscription(){U.VH.initializePromise.then(()=>{let e=U.VH.get("offline");e!==this.enabled&&(e?this.enable():this.disable()),this.cleanupFns.push(U.VH.subscribe("offline",e=>{e?this.enable():this.disable()}))})}async enable(){if(!eb){console.log("Offline mode is not supported");return}if(this.enabled){console.warn("Offline mode already enabled");return}let{user:e,status:t}=await (0,en.r)({returnOfflineUser:!1});if("loggedIn"!==t){console.warn("Offline mode user not logged in");return}await this.notifyCaches(!0),this.store.dispatch((0,eo.RB)({user:e,lastSynced:new Date().toISOString()}))}async disable(){if(!eb){console.log("Offline mode is not supported");return}if(!this.enabled){console.warn("Offline mode already disabled");return}await this.notifyCaches(!1),this.store.dispatch((0,eo.Iq)())}async notifyCaches(e){return Promise.all(e?this.caches.map(e=>e.enable()):this.caches.map(e=>e.disable()))}cleanup(){for(;this.cleanupFns.length>0;){var e;null===(e=this.cleanupFns.pop())||void 0===e||e()}}constructor(){this.store=(0,I.bh)(),this.serwistOfflineCache=el(),this.ydocOfflineCache=(0,ec.H)(),this.apolloOfflineCache=(0,er.a)(),this.caches=[this.serwistOfflineCache,this.ydocOfflineCache,this.apolloOfflineCache],this.cleanupFns=[]}}let ex=async()=>{if(r)throw Error("OfflineManager already initialized");try{r=new ev,await r.init()}catch(e){console.error("Error initializing OfflineManager",e)}};window.getOfflineManagerState=()=>(0,I.bh)().getState().OfflineManager,window.getOfflineManager=()=>r;var eE=n(44007),eS=n(1384),ej=n(55516);let e_="no_org_id",eC=e=>{let{children:t}=e;(0,eS.iZ)();let{user:n,anonymousUser:r,currentWorkspace:i,isUserLoading:o}=(0,q.SE)();return(0,f.useEffect)(()=>{let e=(0,ej.K)();(0,eE.$n)(e.get()),e.fetch().then(eE.$n).catch(()=>{})},[]),(0,f.useEffect)(()=>{let e;if(!o){if(n){let{id:t,email:r}=n,s=!!r&&r.endsWith("@gamma.app");e={userId:t,isGammaUser:s,userOrgId:(null==i?void 0:i.id)||e_,anonymousUser:!1,gammaUserFirstName:s?n.firstName:""}}else e={userId:"anonymous_user",isGammaUser:!1,userOrgId:e_,anonymousUser:!0,gammaUserFirstName:""};(0,eE.$n)(e)}},[o,n,r,i]),(0,s.jsx)(s.Fragment,{children:t})};var eI=n(87345),eO=n(29243),eD=n(76009),eT=n(69876),ek=n(26073),eR=n(92035),eA=n(28817),eN=n(19358),eP=n(69465);l.vc.autoAddCss=!1;let eM=(0,I.bh)();ex();let eL=(0,w.RqP)({supportOfflineMode:!0}),eU=(0,w.PGq)(),eH=(0,o.B1)(c.qZ,{styles:{global:{".ProseMirror":{outline:"0 none"}}}});(0,eI.s)(window,eH),(0,eA.Lq)(),J.F7.initialize(),(0,B.lt)(),G.co.init(),N.fy.init({clientToken:g.v.DATADOG_CLIENT_TOKEN,service:"gamma-client",env:g.v.APPLICATION_ENVIRONMENT.replace("production","prod"),site:"datadoghq.com",forwardErrorsToLogs:!1,forwardConsoleLogs:[],sessionSampleRate:100}),function(){let e=new RegExp(String.raw(M(),g.v.API_HOST));if(g.v.DATADOG_RUM_CLIENT_TOKEN){var t;P.v.init({applicationId:g.v.DATADOG_APP_ID,clientToken:g.v.DATADOG_RUM_CLIENT_TOKEN,site:"datadoghq.com",service:"app",env:g.v.APPLICATION_ENVIRONMENT.replace("production","prod"),sessionSampleRate:null!==(t=g.v.DATADOG_RUM_SAMPLE_RATE)&&void 0!==t?t:10,sessionReplaySampleRate:0,trackUserInteractions:!0,trackResources:!0,trackLongTasks:!0,defaultPrivacyLevel:"mask-user-input",allowedTracingUrls:[{match:e,propagatorTypes:["tracecontext"]}]})}}(),(0,$.S1)(),(0,L.u7)(),(0,eT.a)("appMainBundleLoaded"),U.VH.get("debugLogging")||(window.console.debug=()=>{});let eF=e=>function(t){return(0,s.jsx)(eG,{children:(0,s.jsx)(e,{...t})})},eG=e=>{let{children:t}=e,n=(0,h.useRouter)();(0,eO.l)(),(0,eN.k)(),(0,x.U)(),(0,f.useEffect)(()=>{let e=(e,t)=>{let{shallow:n}=t;console.debug("[GammaApp - handleRouteChange] App is changing to ".concat(e," ").concat(n?"with":"without"," shallow routing"))};return n.events.on("routeChangeStart",e),()=>{n.events.off("routeChangeStart",e)}},[n]);let r=(0,ek.aY)();return(0,s.jsx)(p.zt,{store:eM,children:(0,s.jsx)(Z,{children:(0,s.jsx)(a.x,{theme:eH,resetCSS:!0,children:(0,s.jsx)(v,{children:(0,s.jsx)(i.e,{client:eL,children:(0,s.jsxs)(w.mdV,{client:eU,children:[(0,s.jsx)(ez,{}),(0,s.jsx)(E.H6,{}),(0,s.jsx)($.GQ,{}),(0,s.jsx)(S.S,{}),(0,s.jsx)(R,{}),(0,s.jsxs)(q.fS,{children:[(0,s.jsx)(eD.qA,{children:(0,s.jsx)(U.dF,{children:(0,s.jsx)(ee.S,{children:(0,s.jsx)(eC,{children:(0,s.jsx)(V,{children:(0,s.jsx)(ek.dv,{value:r,children:(0,s.jsx)(H.u,{children:t})})})})})})}),(0,s.jsx)(U.MG,{})]})]})})})})})})},eq="A new medium for presenting ideas, powered by AI. Beautiful, engaging content with none of the formatting and design work.",ez=()=>{let e=g.v.APPLICATION_ENVIRONMENT;return(0,s.jsxs)(u(),{children:[(0,s.jsx)("title",{children:"Gamma"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, viewport-fit=cover"}),(0,s.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,s.jsx)("link",{rel:"shortcut icon",href:"production"===e?"/favicons/favicon-192.svg":"staging"===e?"/favicons/favicon_staging.jpg":"/favicons/favicon_local.jpg"}),(0,s.jsx)("meta",{content:eq,name:"description"},"description"),(0,s.jsx)("meta",{content:"Gamma",property:"og:title"},"og:title"),(0,s.jsx)("meta",{content:eq,property:"og:description"},"og:description"),(0,s.jsx)("meta",{content:g.v.OG_IMAGE_URL,property:"og:image"},"og:image"),(0,s.jsx)("meta",{content:"Gamma",property:"twitter:title"},"twitter:title"),(0,s.jsx)("meta",{content:eq,property:"twitter:description"},"twitter:description"),(0,s.jsx)("meta",{content:g.v.OG_IMAGE_URL,property:"twitter:image"},"twitter:image"),(0,s.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,s.jsx)("meta",{content:"summary_large_image",name:"twitter:card"},"twitter:card"),(0,s.jsx)("meta",{name:"google",content:"notranslate"}),(0,s.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900",rel:"stylesheet"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://use.typekit.net/tiw2cwq.css"}),!(0,eR.l6)()&&!(0,eP.wg)()&&(0,s.jsx)("script",{async:!0,src:"https://cdn.optimizely.com/js/20579410255.js"}),(0,s.jsx)("script",{src:"//cdn.iframe.ly/embed.js",async:!0,charSet:"utf-8"})]})}},49414:function(e,t,n){"use strict";n.d(t,{q:function(){return E}});var r=n(52322),s=n(38035),i=n(77533),o=n(49259),a=n(87436),l=n(95897),c=n(28535),d=n(89511),u=n(11121),h=n(44438),f=n(42822),p=n(62614),g=n(75009),m=n(64253),w=n(5879),y=n(23491),b=n(50476);let v=(0,r.jsx)(w.cC,{id:"HiX9QN"}),x={bgImage:"radial-gradient(1px 1px at 20px 30px, #eee, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 50px 160px, #ddd, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 90px 40px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 130px 80px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 160px 120px, #ddd, rgba(0,0,0,0))",bgRepeat:"repeat",bgSize:"200px 200px",transform:"translate(-50%,-50%)",borderRadius:{base:0,lg:"100px"},pos:"relative",maxW:"8xl",maxH:"5xl",minH:{base:0,lg:"5xl"}},E=e=>{let{errMessage:t=v,showDisclosure:n=!1,opacity:E=1,starOverlay:S=!0,backgroundColor:j=m.qZ.colors.trueblue[900],..._}=e;return(0,r.jsx)(s.k,{"data-error-component":!0,w:"100vw",h:"100vh",overflow:"hidden",zIndex:99999,backgroundColor:(0,y.tT)(j,E),..._,children:(0,r.jsx)(s.k,{...S?x:{},justifyContent:"center",alignItems:"center",flex:1,p:[4,16],left:"50%",top:"50%",children:(0,r.jsxs)(b.qX,{lede:"",title:(0,r.jsx)(w.cC,{id:"HbR60U"}),stackProps:{shadow:"lg-dark",position:"relative"},children:[(0,r.jsx)(i.x,{children:(0,r.jsx)(w.cC,{id:"1gm+lP"})}),n&&(0,r.jsx)(o.U,{allowToggle:!0,pt:4,children:(0,r.jsxs)(a.Q,{children:[(0,r.jsxs)(l.K,{px:0,_hover:{bgColor:"none"},borderStyle:"none",children:[(0,r.jsx)(c.xu,{flex:"1",textAlign:"left",children:(0,r.jsx)(w.cC,{id:"qug3k/"})}),(0,r.jsx)(d.X,{})]}),(0,r.jsx)(u.H,{pb:4,children:(0,r.jsx)(h.E,{colorScheme:"red",children:t})})]})}),(0,r.jsx)(f.M,{children:(0,r.jsx)(p.z,{variant:"solid",size:"lg",m:6,onClick:()=>{window.location.reload()},children:(0,r.jsx)(w.cC,{id:"C6f2hU"})})}),(0,r.jsx)(g.E,{pos:"absolute",w:36,bottom:"calc(-100% + 120px)",right:-12,src:"/_next/static/media/Sal-Asteroid-Parachute.ad317576.png",pointerEvents:"none",opacity:{base:0,md:1}})]})})})}},69962:function(e,t,n){"use strict";n.d(t,{$C:function(){return h},H6:function(){return u},Uj:function(){return f}});var r=n(52322),s=n(5632),i=n(73534),o=n.n(i),a=n(95405),l=n(40382),c=n(63331);let d=["/signin","/signup","/invitations/workspaces/[workspaceId]"],u=()=>{let e=(0,s.useRouter)().pathname;return!(0,l.gF)()||d.includes(e)?null:(0,r.jsx)("style",{children:".grecaptcha-badge { visibility: hidden; }"})},h=()=>(0,r.jsx)(o(),{src:"https://www.google.com/recaptcha/enterprise.js?render=".concat(a.v.RECAPTCHA_SCORING_KEY),async:!0,defer:!0}),f=async e=>(await (0,c.X)(50,100)(()=>!!window.grecaptcha).catch(()=>{throw Error("Timed out waiting for grecaptcha")}),new Promise((t,n)=>{grecaptcha.enterprise.ready(async()=>{try{let n=await grecaptcha.enterprise.execute(a.v.RECAPTCHA_SCORING_KEY,{action:e});t(n)}catch(e){console.log(e),n(e)}})}))},43848:function(e,t,n){"use strict";n.d(t,{H:function(){return S}});var r=n(30733),s=n.n(r),i=n(54073),o=n.n(i),a=n(67304),l=n.n(a),c=n(71383),d=n(60589),u=n(6092),h=n(69180);let f="custom",p="updates",g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},[n]=d.ay(e.db,[p]);return d.go(n,d.sc(e._dbref,!1)).then(r=>{t(n),h.ay(e.doc,()=>{r.forEach(t=>h.NG(e.doc,t))},e,!1)}).then(()=>d.S_(n).then(t=>{e._dbref=t+1})).then(()=>d.QX(n).then(t=>{e._dbsize=t})).then(()=>n)},m=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return g(e).then(n=>{(t||e._dbsize>=500)&&d.yP(n,h.D$(e.doc)).then(()=>d.IV(n,d.UE(e._dbref,!0))).then(()=>d.QX(n).then(t=>{e._dbsize=t}))})},w=e=>d.Lj(e);class y extends u.y{destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{d.Lj(this.name)})}get(e){return this._db.then(t=>{let[n]=d.ay(t,[f],"readonly");return d.U2(n,e)})}set(e,t){return this._db.then(n=>{let[r]=d.ay(n,[f]);return d.gz(r,t,e)})}del(e){return this._db.then(t=>{let[n]=d.ay(t,[f]);return d.IV(n,e)})}constructor(e,t){super(),this.doc=t,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=d.X3(e,e=>d._w(e,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=this._db.then(e=>(this.db=e,g(this,e=>d.yP(e,h.D$(t))).then(()=>(this._destroyed||(this.emit("synced",[this]),this.synced=!0),this)))),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(e,t)=>{if(this.db&&t!==this){let[t]=d.ay(this.db,[p]);d.yP(t,e),++this._dbsize>=500&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{m(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}}var b=n(78112),v=n(8037),x=n(12753);class E{async enable(){}async disable(){}get enabled(){return(0,x.aL)(this.store.getState())}async loadYDoc(e,t){return this.enabled?!!(0,x.pG)(this.store.getState())[e]&&(this.setup(e,t),!0):(console.warn("Cannot setupForDocLoad when it is not enabled"),!1)}async syncYDoc(e,t){if(!this.enabled){console.warn("Cannot setup IndexedDB for doc as it is not enabled");return}await this.setup(e,t),this.store.dispatch((0,x.fz)({docId:e,lastSynced:new Date().toISOString()}))}setup(e,t){return new Promise(n=>{let r=new y(e,t),s=o()(()=>{let e=t.getMap("SCHEMA_VERSION").get("REQUIRED_VERSION");r.set("lastUpdated",new Date().toISOString()),r.set("schemaVersion",e||"")},1e3);t.on("update",s),r.on("synced",()=>{n()})})}async gc(){let e=Date.now(),t=Object.values(this.syncedYDocs).filter(t=>!!t.lastSynced&&e-new Date(t.lastSynced).getTime()>v.c).map(e=>e.docId),n=(0,b.yU)(this.store.getState());n?this.removeDocs(l()(t,n)):this.removeDocs(t)}async removeDocs(e){if(0===e.length)return;this.store.dispatch((0,x.h_)({docIds:e}));let t=e.map(e=>w(e));await Promise.all(t)}async debug(){return{syncedYdocs:this.syncedYDocs}}get syncedYDocs(){return(0,x.pG)(this.store.getState())}constructor(){this.store=(0,c.bh)()}}let S=s()(()=>new E)},1384:function(e,t,n){"use strict";n.d(t,{bf:function(){return g},iZ:function(){return f},lh:function(){return h},wK:function(){return p}});var r=n(2784),s=n(30240),i=n(71383),o=n(78112),a=n(33945),l=n(21562),c=n(44007);let d=e=>Math.random()<=1/e;class u{setupProvider(){this.t1SetupProvider||(this.t1SetupProvider=performance.now())}downloadDoc(){this.t2DownloadDoc||(this.t2DownloadDoc=performance.now())}onCreate(){this.t3OnCreate||(this.t3OnCreate=performance.now())}report(){return null===this.t1SetupProvider||null===this.t2DownloadDoc||null===this.t3OnCreate?null:{downloadDoc:this.t2DownloadDoc-this.t1SetupProvider,onCreate:this.t3OnCreate-this.t2DownloadDoc}}constructor(){this.t1SetupProvider=null,this.t2DownloadDoc=null,this.t3OnCreate=null}}let h=(e,t)=>{let n=(0,i.CG)(o.Pw),s=(0,r.useRef)(n);(0,r.useEffect)(()=>{s.current=n},[n]),(0,r.useEffect)(()=>{if(e)return window.addEventListener("keydown",n,!0),()=>{window.removeEventListener("keydown",n,!0)};function n(e){if(!e.target.closest(".ProseMirror")||!s.current||!d(t))return;let n=performance.now();requestAnimationFrame(()=>{let t=e.key;" "===t&&(t="Space");let r=performance.now()-n;(0,c.EF)({...(0,l.H)(),key:t,duration:r})})}},[e,s,t])},f=()=>{let e=(0,s.ye)("rumSampleRate");(0,r.useEffect)(()=>{(0,c._k)(e)},[e])},p=e=>{let t=(0,r.useCallback)(t=>{let{isFullscreen:n=!1}=t;if(!e)return;let r=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-r;(0,c.gG)({...(0,l.H)(),toMode:a.q.SLIDE_VIEW,duration:e,isFullscreen:n})})})},[e]);return{recordExitSlideModePerformance:(0,r.useCallback)(t=>{let{isFullscreen:n=!1}=t;if(!e)return;let r=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-r;(0,c.gG)({...(0,l.H)(),toMode:a.q.DOC_VIEW,duration:e,isFullscreen:n})})})},[e]),recordEnterSlideModePerformance:t}},g=()=>{let[e]=(0,r.useState)(()=>new u),t=(0,r.useCallback)(()=>{e.setupProvider()},[e]),n=(0,r.useCallback)(()=>{e.downloadDoc()},[e]);return{timeOnCreate:(0,r.useCallback)(()=>{e.onCreate();let t=e.report();if(null===t){console.warn("[HoneycombDocLoadTimer] failed to generate doc timings");return}(0,c.Py)({...(0,l.H)(),duration:t.onCreate}),(0,c.aZ)({...(0,l.H)(),duration:t.downloadDoc})},[e]),timeOnSetupProvider:t,timeOnDownloadDoc:n}}},29243:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var r=n(5632),s=n(2784),i=n(19210),o=n(18960);let a=()=>{let{pathname:e,isReady:t}=(0,r.useRouter)(),n=(0,s.useRef)(!1),[a,l]=(0,i.X)(o.H.lastHomeUrl,"/");(0,s.useEffect)(()=>{!n.current&&t&&(l("/inspiration"===e||"/templates"===e?e:"/"),n.current=!0)},[l,t,e])}},19210:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(2784),s=n(92744);function i(e,t){let[n,i]=(0,r.useState)(()=>{try{let n=s.Q.getItem(e);if(null===n)return t;return JSON.parse(n)}catch(e){return console.error("[useSessionStorage.getItem] Error getting sessionStorage item",e),t}});return[n,(0,r.useCallback)(t=>{try{s.Q.setItem(e,JSON.stringify(t)),i(t)}catch(e){console.error("[useSessionStorage.setItem] Error setting sessionStorage item",e)}},[e])]}},62376:function(){},6991:function(){},76298:function(){},4466:function(){},43839:function(){}}]);
//# sourceMappingURL=8225-2f42fc9919396f13.js.map